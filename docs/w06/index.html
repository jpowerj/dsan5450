<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.8.27">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Jeff Jacobs">

<title>Week 6: Context-Sensitive Fairness ‚Äì DSAN 5450</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
html { -webkit-text-size-adjust: 100%; }
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
/* CSS for citations */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
  margin-bottom: 0em;
}
.hanging-indent div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}</style>


<script src="../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../site_libs/clipboard/clipboard.min.js"></script>
<script src="../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../site_libs/quarto-search/fuse.min.js"></script>
<script src="../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../">
<link href="../favicon.png" rel="icon" type="image/png">
<script src="../site_libs/quarto-html/quarto.js" type="module"></script>
<script src="../site_libs/quarto-html/tabsets/tabsets.js" type="module"></script>
<script src="../site_libs/quarto-html/axe/axe-check.js" type="module"></script>
<script src="../site_libs/quarto-html/popper.min.js"></script>
<script src="../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../site_libs/quarto-html/anchor.min.js"></script>
<link href="../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting-ed96de9b727972fe78a7b5d16c58bf87.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-text-highlighting-styles">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting-dark-4d9afe2b8d18ee9fa5d0d57b5ed4214d.css" rel="stylesheet" class="quarto-color-scheme quarto-color-alternate" id="quarto-text-highlighting-styles">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting-ed96de9b727972fe78a7b5d16c58bf87.css" rel="stylesheet" class="quarto-color-scheme-extra" id="quarto-text-highlighting-styles">
<script src="../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../site_libs/bootstrap/bootstrap-ff63373b1067ca6f91cf1456aa1f00a2.min.css" rel="stylesheet" append-hash="true" class="quarto-color-scheme" id="quarto-bootstrap" data-mode="light">
<link href="../site_libs/bootstrap/bootstrap-dark-0d4a9d19931feb4fee1ddab4b2489000.min.css" rel="stylesheet" append-hash="true" class="quarto-color-scheme quarto-color-alternate" id="quarto-bootstrap" data-mode="dark">
<link href="../site_libs/bootstrap/bootstrap-ff63373b1067ca6f91cf1456aa1f00a2.min.css" rel="stylesheet" append-hash="true" class="quarto-color-scheme-extra" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js" integrity="sha512-v2CJ7UaYy4JwqLDIrZUI/4hqeoQieOmAZNXBeQyjo21dadnwR+8ZaIJVT8EE2iyI61OV8e6M8PP2/4hpQINQ/g==" crossorigin="anonymous" referrerpolicy="no-referrer"></script><link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/gh/dreampulse/computer-modern-web-font@master/fonts.css"><script src="../sidebar.js"></script>

  <script src="https://cdnjs.cloudflare.com/polyfill/v3/polyfill.min.js?features=es6"></script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

<script type="text/javascript">
const typesetMath = (el) => {
  if (window.MathJax) {
    // MathJax Typeset
    window.MathJax.typeset([el]);
  } else if (window.katex) {
    // KaTeX Render
    var mathElements = el.getElementsByClassName("math");
    var macros = [];
    for (var i = 0; i < mathElements.length; i++) {
      var texText = mathElements[i].firstChild;
      if (mathElements[i].tagName == "SPAN" && texText && texText.data) {
        window.katex.render(texText.data, mathElements[i], {
          displayMode: mathElements[i].classList.contains('display'),
          throwOnError: false,
          macros: macros,
          fleqn: false
        });
      }
    }
  }
}
window.Quarto = {
  typesetMath
};
</script>

<link rel="stylesheet" href="../dsan-globals/jjstyles.css">
</head>

<body class="nav-sidebar floating quarto-light"><script id="quarto-html-before-body" type="application/javascript">
    const toggleBodyColorMode = (bsSheetEl) => {
      const mode = bsSheetEl.getAttribute("data-mode");
      const bodyEl = window.document.querySelector("body");
      if (mode === "dark") {
        bodyEl.classList.add("quarto-dark");
        bodyEl.classList.remove("quarto-light");
      } else {
        bodyEl.classList.add("quarto-light");
        bodyEl.classList.remove("quarto-dark");
      }
    }
    const toggleBodyColorPrimary = () => {
      const bsSheetEl = window.document.querySelector("link#quarto-bootstrap:not([rel=disabled-stylesheet])");
      if (bsSheetEl) {
        toggleBodyColorMode(bsSheetEl);
      }
    }
    const setColorSchemeToggle = (alternate) => {
      const toggles = window.document.querySelectorAll('.quarto-color-scheme-toggle');
      for (let i=0; i < toggles.length; i++) {
        const toggle = toggles[i];
        if (toggle) {
          if (alternate) {
            toggle.classList.add("alternate");
          } else {
            toggle.classList.remove("alternate");
          }
        }
      }
    };
    const toggleColorMode = (alternate) => {
      // Switch the stylesheets
      const primaryStylesheets = window.document.querySelectorAll('link.quarto-color-scheme:not(.quarto-color-alternate)');
      const alternateStylesheets = window.document.querySelectorAll('link.quarto-color-scheme.quarto-color-alternate');
      manageTransitions('#quarto-margin-sidebar .nav-link', false);
      if (alternate) {
        // note: dark is layered on light, we don't disable primary!
        enableStylesheet(alternateStylesheets);
        for (const sheetNode of alternateStylesheets) {
          if (sheetNode.id === "quarto-bootstrap") {
            toggleBodyColorMode(sheetNode);
          }
        }
      } else {
        disableStylesheet(alternateStylesheets);
        enableStylesheet(primaryStylesheets)
        toggleBodyColorPrimary();
      }
      manageTransitions('#quarto-margin-sidebar .nav-link', true);
      // Switch the toggles
      setColorSchemeToggle(alternate)
      // Hack to workaround the fact that safari doesn't
      // properly recolor the scrollbar when toggling (#1455)
      if (navigator.userAgent.indexOf('Safari') > 0 && navigator.userAgent.indexOf('Chrome') == -1) {
        manageTransitions("body", false);
        window.scrollTo(0, 1);
        setTimeout(() => {
          window.scrollTo(0, 0);
          manageTransitions("body", true);
        }, 40);
      }
    }
    const disableStylesheet = (stylesheets) => {
      for (let i=0; i < stylesheets.length; i++) {
        const stylesheet = stylesheets[i];
        stylesheet.rel = 'disabled-stylesheet';
      }
    }
    const enableStylesheet = (stylesheets) => {
      for (let i=0; i < stylesheets.length; i++) {
        const stylesheet = stylesheets[i];
        if(stylesheet.rel !== 'stylesheet') { // for Chrome, which will still FOUC without this check
          stylesheet.rel = 'stylesheet';
        }
      }
    }
    const manageTransitions = (selector, allowTransitions) => {
      const els = window.document.querySelectorAll(selector);
      for (let i=0; i < els.length; i++) {
        const el = els[i];
        if (allowTransitions) {
          el.classList.remove('notransition');
        } else {
          el.classList.add('notransition');
        }
      }
    }
    const isFileUrl = () => {
      return window.location.protocol === 'file:';
    }
    const hasAlternateSentinel = () => {
      let styleSentinel = getColorSchemeSentinel();
      if (styleSentinel !== null) {
        return styleSentinel === "alternate";
      } else {
        return false;
      }
    }
    const setStyleSentinel = (alternate) => {
      const value = alternate ? "alternate" : "default";
      if (!isFileUrl()) {
        window.localStorage.setItem("quarto-color-scheme", value);
      } else {
        localAlternateSentinel = value;
      }
    }
    const getColorSchemeSentinel = () => {
      if (!isFileUrl()) {
        const storageValue = window.localStorage.getItem("quarto-color-scheme");
        return storageValue != null ? storageValue : localAlternateSentinel;
      } else {
        return localAlternateSentinel;
      }
    }
    const toggleGiscusIfUsed = (isAlternate, darkModeDefault) => {
      const baseTheme = document.querySelector('#giscus-base-theme')?.value ?? 'light';
      const alternateTheme = document.querySelector('#giscus-alt-theme')?.value ?? 'dark';
      let newTheme = '';
      if(authorPrefersDark) {
        newTheme = isAlternate ? baseTheme : alternateTheme;
      } else {
        newTheme = isAlternate ? alternateTheme : baseTheme;
      }
      const changeGiscusTheme = () => {
        // From: https://github.com/giscus/giscus/issues/336
        const sendMessage = (message) => {
          const iframe = document.querySelector('iframe.giscus-frame');
          if (!iframe) return;
          iframe.contentWindow.postMessage({ giscus: message }, 'https://giscus.app');
        }
        sendMessage({
          setConfig: {
            theme: newTheme
          }
        });
      }
      const isGiscussLoaded = window.document.querySelector('iframe.giscus-frame') !== null;
      if (isGiscussLoaded) {
        changeGiscusTheme();
      }
    };
    const authorPrefersDark = false;
    const darkModeDefault = authorPrefersDark;
      document.querySelector('link#quarto-text-highlighting-styles.quarto-color-scheme-extra').rel = 'disabled-stylesheet';
      document.querySelector('link#quarto-bootstrap.quarto-color-scheme-extra').rel = 'disabled-stylesheet';
    let localAlternateSentinel = darkModeDefault ? 'alternate' : 'default';
    // Dark / light mode switch
    window.quartoToggleColorScheme = () => {
      // Read the current dark / light value
      let toAlternate = !hasAlternateSentinel();
      toggleColorMode(toAlternate);
      setStyleSentinel(toAlternate);
      toggleGiscusIfUsed(toAlternate, darkModeDefault);
      window.dispatchEvent(new Event('resize'));
    };
    // Switch to dark mode if need be
    if (hasAlternateSentinel()) {
      toggleColorMode(true);
    } else {
      toggleColorMode(false);
    }
  </script>

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" role="button" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
        <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="../w06/index.html">Week 6: {{&lt; var w06.date-md &gt;}}</a></li></ol></nav>
        <a class="flex-grow-1" role="navigation" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
        </a>
      <button type="button" class="btn quarto-search-button" aria-label="Search" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation floating overflow-auto">
    <div class="pt-lg-2 mt-2 text-left sidebar-header">
    <div class="sidebar-title mb-0 py-0">
      <a href="../">DSAN 5450: Data Ethics and Policy</a> 
        <div class="sidebar-tools-main">
  <a href="" class="quarto-color-scheme-toggle quarto-navigation-tool  px-1" onclick="window.quartoToggleColorScheme(); return false;" title="Toggle dark mode"><i class="bi"></i></a>
</div>
    </div>
      </div>
        <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
        </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><i class="bi bi-house pe-1"></i> Home</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../syllabus.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Syllabus</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../resources.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Resources</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../writeups/index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Writeups</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../assignments.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Assignments</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../midterm.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Midterm</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../final.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Final Project</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="https://georgetown.zoom.us/j/99423558865?pwd=C8U3NyVCigaA3rqt7ZJyAPvDl534Ad.1" class="sidebar-item-text sidebar-link" target="_blank">
 <span class="menu-text">Zoom Link <i class="bi bi-box-arrow-up-right ps-1"></i></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="https://georgetown.hosted.panopto.com/Panopto/Pages/Sessions/List.aspx?folderID=0d0e28b0-3d26-485e-9be9-b3ba00328718" class="sidebar-item-text sidebar-link" target="_blank">
 <span class="menu-text">Recordings <i class="bi bi-box-arrow-up-right ps-1"></i></span></a>
  </div>
</li>
        <li class="px-0"><hr class="sidebar-divider hi "></li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../w01/index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Week 1: Jan 14</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../w02/index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Week 2: Jan 21</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../w03/index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Week 3: Jan 28</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../w04/index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Week 4: Feb 4</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../w05/index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Week 5: Feb 11</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../w06/index.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text">Week 6: Feb 18</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../w07/index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Week 7: Feb 25</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../w08/index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Week 8: Mar 11</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../w09/index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Week 9: Mar 18</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../w10/index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Week 10: Mar 25</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../w11/index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Week 11: Apr 1</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../w12/index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Week 12: Apr 8</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../w13/index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Week 13: Apr 15</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../w14/index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Week 14: Apr 22</span></a>
  </div>
</li>
        <li class="px-0"><hr class="sidebar-divider hi "></li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="https://classroom.google.com/c/ODM3MzMwNDEzNTIw?cjc=4yx2vpzn" class="sidebar-item-text sidebar-link" target="_blank">
 <span class="menu-text">Google Classroom <i class="bi bi-box-arrow-up-right ps-1"></i></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="https://chat.google.com/room/AAQAGKIb8ow?cls=7" class="sidebar-item-text sidebar-link" target="_blank">
 <span class="menu-text">Google Space <i class="bi bi-box-arrow-up-right ps-1"></i></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="https://jjacobs.me/meet" class="sidebar-item-text sidebar-link" target="_blank">
 <span class="menu-text">Office Hours <i class="bi bi-box-arrow-up-right ps-1"></i></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="https://forms.gle/fgDwTMG5GUUvfafTA" class="sidebar-item-text sidebar-link" target="_blank">
 <span class="menu-text">Suggestion Box <i class="bi bi-box-arrow-up-right ps-1"></i></span></a>
  </div>
</li>
    </ul>
    </div>
<div class="quarto-sidebar-footer"><div class="sidebar-footer-item">
<p><em>Updated 2026-02-18, 03:41:31 PM</em></p>
</div></div></nav>
<div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#schedule" id="toc-schedule" class="nav-link active" data-scroll-target="#schedule">Schedule</a></li>
  <li><a href="#recap-context-free-fairness-antecedents-and-the-impossibility-result" id="toc-recap-context-free-fairness-antecedents-and-the-impossibility-result" class="nav-link" data-scroll-target="#recap-context-free-fairness-antecedents-and-the-impossibility-result">Recap: Context-Free Fairness, Antecedents, and the Impossibility Result</a>
  <ul class="collapse">
  <li><a href="#achieving-fair-misclassification" id="toc-achieving-fair-misclassification" class="nav-link" data-scroll-target="#achieving-fair-misclassification">Achieving ‚ÄúFair Misclassification‚Äù</a></li>
  <li><a href="#achieving-fair-calibration" id="toc-achieving-fair-calibration" class="nav-link" data-scroll-target="#achieving-fair-calibration">Achieving ‚ÄúFair Calibration‚Äù</a></li>
  <li><a href="#so-what-do-we-do-option-1-argueadvocate" id="toc-so-what-do-we-do-option-1-argueadvocate" class="nav-link" data-scroll-target="#so-what-do-we-do-option-1-argueadvocate">So‚Ä¶ What Do We Do? Option 1: Argue/Advocate</a></li>
  <li><a href="#so-what-do-we-do-part-2-incorporate-context" id="toc-so-what-do-we-do-part-2-incorporate-context" class="nav-link" data-scroll-target="#so-what-do-we-do-part-2-incorporate-context">So‚Ä¶ What Do We Do? Part 2: Incorporate Context</a></li>
  <li><a href="#why-not-both" id="toc-why-not-both" class="nav-link" data-scroll-target="#why-not-both">Why Not Both??</a></li>
  </ul></li>
  <li><a href="#context-free-rightarrow-context-sensitive" id="toc-context-free-rightarrow-context-sensitive" class="nav-link" data-scroll-target="#context-free-rightarrow-context-sensitive"><span class="cbg-darker"><i class="bi bi-1-circle"></i> Context-Free</span><br> <span class="math inline">\(\rightarrow\)</span> <i class="bi bi-2-circle"></i> Context-Sensitive</a>
  <ul class="collapse">
  <li><a href="#motivation-linguistic-meaning" id="toc-motivation-linguistic-meaning" class="nav-link" data-scroll-target="#motivation-linguistic-meaning">Motivation: Linguistic Meaning</a></li>
  <li><a href="#impossibility-results" id="toc-impossibility-results" class="nav-link" data-scroll-target="#impossibility-results">Impossibility Results!</a></li>
  </ul></li>
  </ul>
<div class="toc-actions"><ul><li><a href="https://github.com/jpowerj/dsan5450/blob/main/w06/index.qmd" target="_blank" class="toc-action"><i class="bi bi-github"></i>View source</a></li></ul></div><div class="quarto-alternate-formats"><h2>Other Formats</h2><ul><li><a href="slides.html"><i class="bi bi-file-slides"></i>RevealJS</a></li></ul></div></nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">


<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Week 6: Context-Sensitive Fairness</h1>
<p class="subtitle lead"><em>DSAN 5450: Data Ethics and Policy</em><br><span class="subsubtitle">Spring 2026, Georgetown University</span></p>
  <div class="quarto-categories">
    <div class="quarto-category">Class Sessions</div>
  </div>
  </div>


<div class="quarto-title-meta-author">
  <div class="quarto-title-meta-heading">Author</div>
  <div class="quarto-title-meta-heading">Affiliation</div>
  
    <div class="quarto-title-meta-contents">
    <p class="author">Jeff Jacobs </p>
  </div>
  <div class="quarto-title-meta-contents">
        <p class="affiliation">
            <a href="mailto:jj1088@georgetown.edu"><code>jj1088@georgetown.edu</code></a>
          </p>
      </div>
  </div>

<div class="quarto-title-meta">

      
    <div>
    <div class="quarto-title-meta-heading">Published</div>
    <div class="quarto-title-meta-contents">
      <p class="date">Wednesday, February 18, 2026</p>
    </div>
  </div>
  
    
  </div>
  


</header>


<center>
<a class="h2" href="./slides.html" target="_blank">Open slides in new window ‚Üí</a>
</center>
<section id="schedule" class="level1 smaller small-title crunch-title crunch-callout" data-name="Schedule">
<h1 class="smaller small-title crunch-title crunch-callout" data-name="Schedule">Schedule</h1>
<p>Today‚Äôs Planned Schedule:</p>
<table class="caption-top table">
<colgroup>
<col style="width: 12%">
<col style="width: 12%">
<col style="width: 12%">
<col style="width: 64%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;"></th>
<th style="text-align: left;">Start</th>
<th style="text-align: left;">End</th>
<th style="text-align: left;">Topic</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;"><strong>Lecture</strong></td>
<td style="text-align: left;">3:30pm</td>
<td style="text-align: left;">3:45pm</td>
<td style="text-align: left;"><a href="#quick-clarifications--recaps">Recap: Context-Free Fairness ‚Üí</a></td>
</tr>
<tr class="even">
<td style="text-align: left;"></td>
<td style="text-align: left;">3:45pm</td>
<td style="text-align: left;">4:00pm</td>
<td style="text-align: left;"><a href="#so-whats-the-problem">Determinism <span class="math inline">\(\rightarrow\)</span> Probability <span class="math inline">\(\rightarrow\)</span> Causality ‚Üí</a></td>
</tr>
<tr class="odd">
<td style="text-align: left;"></td>
<td style="text-align: left;">4:00pm</td>
<td style="text-align: left;">4:30pm</td>
<td style="text-align: left;"><a href="#the-fundamental-problem-of-causal-inference">Fundamental Problem of Causal Inference ‚Üí</a></td>
</tr>
<tr class="even">
<td style="text-align: left;"></td>
<td style="text-align: left;">4:30pm</td>
<td style="text-align: left;">5:00pm</td>
<td style="text-align: left;"><a href="#do-calculus">Do-Calculus ‚Üí</a></td>
</tr>
<tr class="odd">
<td style="text-align: left;"><strong>Break!</strong></td>
<td style="text-align: left;">5:00pm</td>
<td style="text-align: left;">5:10pm</td>
<td style="text-align: left;"></td>
</tr>
<tr class="even">
<td style="text-align: left;"></td>
<td style="text-align: left;">5:10pm</td>
<td style="text-align: left;">6:00pm</td>
<td style="text-align: left;"><a href="#the-problem-of-colliders">Chalkboard Lab: DAGs for Colliders ‚Üí</a></td>
</tr>
</tbody>
</table>
</section>
<section id="recap-context-free-fairness-antecedents-and-the-impossibility-result" class="level1">
<h1>Recap: Context-Free Fairness, Antecedents, and the Impossibility Result</h1>
<section id="achieving-fair-misclassification" class="level2 smaller">
<h2 class="smaller anchored" data-anchor-id="achieving-fair-misclassification">Achieving ‚ÄúFair Misclassification‚Äù</h2>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="images/misclassification.png" class="img-fluid quarto-figure quarto-figure-center figure-img" style="width:50.0%"></p>
</figure>
</div>
<ul>
<li>If you think <strong>fairness = equal misclassification rates between racial groups</strong>, üëç</li>
<li>If you think <strong>fairness = equal correct prediction rates between racial groups</strong>, üëé</li>
</ul>
</section>
<section id="achieving-fair-calibration" class="level2 smaller">
<h2 class="smaller anchored" data-anchor-id="achieving-fair-calibration">Achieving ‚ÄúFair Calibration‚Äù</h2>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="images/calibration.png" class="img-fluid quarto-figure quarto-figure-center figure-img" style="width:50.0%"></p>
</figure>
</div>
<ul>
<li>If you think <strong>fairness = equal misclassification rates between racial groups</strong>, üëç</li>
<li>If you think <strong>fairness = equal correct prediction rates between racial groups</strong>, üëé</li>
</ul>
</section>
<section id="so-what-do-we-do-option-1-argueadvocate" class="level2 smaller crunch-title">
<h2 class="smaller crunch-title anchored" data-anchor-id="so-what-do-we-do-option-1-argueadvocate">So‚Ä¶ What Do We Do? Option 1: Argue/Advocate</h2>
<ul>
<li><strong>Whitepaper(!):</strong> Berkman Klein Center for Internet &amp; Society at Harvard University (2021), <a href="https://dash.harvard.edu/entities/publication/739ea327-7c95-43d9-9fdc-a702bf420e40"><em>Principled Artificial Intelligence: Mapping Consensus in Ethical and Rights-based Approaches to Principles for AI</em></a></li>
<li>Your first ‚Äútemplate‚Äù for a final project!</li>
<li>Problem (left til post-midterm): How do we know <strong>whose interests</strong> are included/excluded in the arguments?</li>
<li>What conditions could we establish to <strong>systematically</strong>/structurally ensure inclusion of the interests of all? [Discourse ethics; coming soon!]</li>
</ul>
</section>
<section id="so-what-do-we-do-part-2-incorporate-context" class="level2 smaller crunch-title crunch-ul crunch-blockquote">
<h2 class="smaller crunch-title crunch-ul crunch-blockquote anchored" data-anchor-id="so-what-do-we-do-part-2-incorporate-context">So‚Ä¶ What Do We Do? Part 2: Incorporate Context</h2>
<ul>
<li><p>One option: argue about which of the two definitions is ‚Äúbetter‚Äù for the next 100 years (what is the best way to give food to the poor?)</p>
<blockquote class="blockquote">
<p>It appears to reveal an unfortunate but inexorable fact about our world: we must choose between two intuitively appealing ways to understand fairness in ML. Many scholars have done just that, defending either ProPublica‚Äôs or Northpointe‚Äôs definitions against what they see as the misguided alternative. <span class="citation" data-cites="simons_algorithms_2023">(<a href="#ref-simons_algorithms_2023" role="doc-biblioref">Simons 2023</a>)</span></p>
</blockquote></li>
<li><p>Another option: study and then work to ameliorate the social conditions which <strong>force us into</strong> this realm of mathematical impossibility (why do the poor have no food?)</p>
<blockquote class="blockquote">
<p>The impossibility result is about much more than math. [It occurs because] the <strong>underlying</strong> outcome is distributed unevenly in society. This is <strong>a fact about society, not mathematics</strong>, and requires engaging with a complex, checkered history of systemic racism in the US. Predicting an outcome whose distribution is shaped by this history requires tradeoffs because the inequalities and injustices are encoded in data‚Äîin this case, because America has criminalized Blackness for as long as America has existed.</p>
</blockquote></li>
</ul>
</section>
<section id="why-not-both" class="level2 smaller crunch-title crunch-ul title-12 crunch-li-10">
<h2 class="smaller crunch-title crunch-ul title-12 crunch-li-10 anchored" data-anchor-id="why-not-both">Why Not Both??</h2>
<ul>
<li>On the one hand: yes, both! On the other hand: <a hrf="https://en.wikipedia.org/wiki/Argument_to_moderation" target="_blank">fallacy of the ‚Äúmiddle ground‚Äù</a></li>
<li>We‚Äôre back at <strong>descriptive vs.&nbsp;normative</strong>:
<ul>
<li><strong>Descriptively</strong>, given 100 values <span class="math inline">\(v_1, \ldots, v_{100}\)</span>, their <strong>mean</strong> may be a good way to summarize, if we have to choose a single number</li>
<li>But, <strong>normatively</strong>, imagine that these are <strong>opinions</strong> that people hold about fairness.</li>
<li>Now, if it‚Äôs the US South in 1860 and <span class="math inline">\(v_i\)</span> represents person <span class="math inline">\(i\)</span>‚Äôs approval of slavery, from a sample of 100 people, then approx. 97 of the <span class="math inline">\(v_i\)</span>‚Äôs are ‚Äúdoes not disapprove‚Äù <span class="citation" data-cites="rousey_friends_2001">(<a href="#ref-rousey_friends_2001" role="doc-biblioref">Rousey 2001</a>)</span> ‚Äî in this case, normatively, is the mean <span class="math inline">\(0.97\)</span> the ‚Äúcorrect‚Äù answer?</li>
</ul></li>
<li>We have another case where, like the ‚Äúgrass is green‚Äù vs.&nbsp;‚Äúgrass ought to be green‚Äù example, we cannot just ‚Äúimport‚Äù our logical/mathematical tools from the former to solve the latter! (However: this does <strong>not</strong> mean they are <strong>useless</strong>! This is the fallacy of the <strong>excluded middle</strong>, sort of the opposite of the fallacy of the middle ground)</li>
<li>This is why we have <strong>ethical frameworks</strong> in the first place! Going back to <strong>Rawls</strong>: ‚Äú97% of Americans think black people shouldn‚Äôt have rights‚Äù &nbsp;<span class="math inline">\(\nimplies\)</span>‚Äúblack people shouldn‚Äôt have rights‚Äù, since rights are a <strong>primary good</strong></li>
</ul>
</section>
</section>
<section id="context-free-rightarrow-context-sensitive" class="level1 title-12" data-stack-name="Context-Sensitive Fairness">
<h1 class="title-12" data-stack-name="Context-Sensitive Fairness"><span class="cbg-darker"><i class="bi bi-1-circle"></i> Context-Free</span><br> <span class="math inline">\(\rightarrow\)</span> <i class="bi bi-2-circle"></i> Context-Sensitive</h1>
<section id="motivation-linguistic-meaning" class="level2">
<h2 class="anchored" data-anchor-id="motivation-linguistic-meaning">Motivation: Linguistic Meaning</h2>
<div class="callout callout-style-default callout-note no-icon callout-titled" title="<i class='bi bi-info-circle pe-1'></i> The Distributional Hypothesis [@firth_selected_1968, 179]">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
<span class="screen-reader-only">Note</span><i class="bi bi-info-circle pe-1"></i> The Distributional Hypothesis <span class="citation" data-cites="firth_selected_1968">(<a href="#ref-firth_selected_1968" role="doc-biblioref">Firth 1968, 179</a>)</span>
</div>
</div>
<div class="callout-body-container callout-body">
<p><strong>You shall know a word by the company it keeps!</strong></p>
</div>
</div>
<ul>
<li>Related to <strong>context-free</strong> vs.&nbsp;<strong>context-sensitive</strong> distinction in Computer Science (old-school NLP)!</li>
<li>But why is it relevant to DSAN 5450?‚Ä¶</li>
</ul>
</section>
<section id="impossibility-results" class="level2 crunch-title crunch-ul code-black">
<h2 class="crunch-title crunch-ul code-black anchored" data-anchor-id="impossibility-results">Impossibility Results!</h2>
<ul>
<li>Let‚Äôs see what happens if we try to <strong>reason about definitions/meaning in language</strong> without the ability to incorporate <strong>‚Äúcontext‚Äù</strong> (here defined in a silly way‚Ä¶ point holds as we go up the ‚Äúlanguage complexity hierarchy‚Äù)</li>
<li>Try to write a finite-state automata to detect ‚Äúvalid‚Äù strings in the language <span class="math inline">\(\{a^nb^n \mid n \in \mathbb{Z}^{\geq 0}\}\)</span>: <code>aabb</code> ‚úÖ, <code>aba</code> ‚ùå</li>
</ul>
<div data-layout="[1,1]">
<div id="automata-fail">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="images/automata_start_accept.svg" class="img-fluid quarto-figure quarto-figure-center figure-img"></p>
</figure>
</div>
</div>
<section id="there-is-a-solution-outside-scope-of-class" class="level2">
<h2 class="anchored" data-anchor-id="there-is-a-solution-outside-scope-of-class">(There <em>is</em> a Solution! Outside Scope of Class‚Ä¶)</h2>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="images/PDA.webp" class="img-fluid figure-img"></p>
<figcaption><a href="https://www.geeksforgeeks.org/theory-of-computation/npda-for-accepting-the-language-l-an-bn-n1/">Source</a></figcaption>
</figure>
</div>
</section>
<section id="the-meaning-of-fairness" class="level2">
<h2 class="anchored" data-anchor-id="the-meaning-of-fairness">The ‚ÄúMeaning‚Äù of Fairness</h2>
<div class="callout callout-style-default callout-note no-icon callout-titled" title="<i class='bi bi-info-circle pe-1'></i> The Distributional [Fairness] Hypothesis">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
<span class="screen-reader-only">Note</span><i class="bi bi-info-circle pe-1"></i> The Distributional [Fairness] Hypothesis
</div>
</div>
<div class="callout-body-container callout-body">
<p><strong>You shall know ‚Äúfairness‚Äù by the company it keeps [i.e., the context it incorporates].</strong></p>
</div>
</div>
<ul>
<li>Context-free (confusion-matrix-based) fairness: ‚Äúplug the confusion matrix values into a formula and see if the formula is satisfied‚Äù</li>
<li>Context-sensitive fairness: analyze fairness <strong>relative to</strong> a set of <strong>antecedents</strong> regarding how <strong>normative concerns</strong> should enter into our measurements of fairness</li>
</ul>
</section>
<section id="similarity-based-fairness" class="level1" data-stack-name="Similarity-Based Fairness">
<h1 data-stack-name="Similarity-Based Fairness">Similarity-Based Fairness</h1>
<section id="group-fairness-rightarrow-individual-fairness" class="level2 title-09">
<h2 class="title-09 anchored" data-anchor-id="group-fairness-rightarrow-individual-fairness">Group Fairness <span class="math inline">\(\rightarrow\)</span> Individual Fairness</h2>
<ul>
<li>The crucial insight of Dwork: <strong>group-level</strong> fairness does not ensure that <strong>individuals</strong> are treated fairly <strong>as individuals</strong></li>
<li>Exactly the issue we‚Äôve seen with <strong>utilitarianism</strong>: optimizing <strong>society-level</strong> ‚Äúhappiness‚Äù may lead to <strong>individuals</strong> being brutally mistreated (e.g., having their rights violated)</li>
<li>So, at a high level, Dwork‚Äôs proposal could provide a Rawls-style <strong>ordering</strong>: individual fairness <strong>lexically prior</strong> to group-level fairness (optimize group-level fairness once individual-level is satisfied)</li>
</ul>
</section>
<section id="the-normative-antecedent" class="level2 crunch-title crunch-ul crunch-callout crunch-blockquote crunch-quarto-layout-panel">
<h2 class="crunch-title crunch-ul crunch-callout crunch-blockquote crunch-quarto-layout-panel anchored" data-anchor-id="the-normative-antecedent">The (Normative!) Antecedent</h2>
<div class="callout callout-style-default callout-note no-icon callout-titled" title="Fairness Through Awareness [@dwork_fairness_2011]">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
<span class="screen-reader-only">Note</span>Fairness Through Awareness <span class="citation" data-cites="dwork_fairness_2011">(<a href="#ref-dwork_fairness_2011" role="doc-biblioref">Dwork et al. 2011</a>)</span>
</div>
</div>
<div class="callout-body-container callout-body">
<p><strong>Individuals who are similar with respect to a task should be classified similarly.</strong></p>
</div>
</div>
<div class="quarto-layout-panel" data-layout="[1,1]">
<div class="quarto-layout-row">
<div id="awareness-left" class="quarto-layout-cell" style="flex-basis: 50.0%;justify-content: flex-start;">
<ul>
<li>Not well-liked in industry / policy because you can‚Äôt just ‚Äúplug in‚Äù results of your classifier and get True/False ‚Äúwe satisfied fairness!‚Äù ‚Ä¶But this is <strong>exactly the point!</strong></li>
</ul>
</div>
<div id="awareness-right" class="quarto-layout-cell" style="flex-basis: 50.0%;justify-content: flex-start;">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="images/manymetrics.png" class="img-fluid figure-img" width="340"></p>
<figcaption>From <span class="citation" data-cites="kiat_machines_2018">Kiat (<a href="#ref-kiat_machines_2018" role="doc-biblioref">2018</a>)</span></figcaption>
</figure>
</div>
</div>
</div>
</div>
</section>
<section id="bringing-in-context" class="level2">
<h2 class="anchored" data-anchor-id="bringing-in-context">Bringing In Context</h2>
<ul>
<li><em>In itself, the principle of equal treatment is abstract, a formal relationship that <strong>lacks substantive content</strong>‚Äù</em></li>
<li><em>The principle must be given content by defining which cases are similar and which are different, and by considering what kinds of differences <strong>justify differential treatment</strong></em></li>
<li><em>Deciding what differences are relevant, and what kinds of differential treatment are justified by particular differences, requires <strong>wrestling with moral and political debates</strong> about the responsibilities of different institutions to address persistent injustice</em> <span class="citation" data-cites="simons_algorithms_2023">(<a href="#ref-simons_algorithms_2023" role="doc-biblioref">Simons 2023, 51</a>)</span></li>
</ul>
</section>
<section id="remember-distance-metrics" class="level2 crunch-title crunch-quarto-layout-panel crunch-ul text-90 crunch-li-8 crunch-quarto-figure">
<h2 class="crunch-title crunch-quarto-layout-panel crunch-ul text-90 crunch-li-8 crunch-quarto-figure anchored" data-anchor-id="remember-distance-metrics">Remember Distance Metrics?(!)</h2>
<div class="quarto-layout-panel" data-layout="[1,1]">
<div class="quarto-layout-row">
<div id="distance-left" class="quarto-layout-cell" style="flex-basis: 50.0%;justify-content: flex-start;">
<ul>
<li>A core element in <strong>both</strong> similarity-based and causal fairness!</li>
<li>Already difficult to choose a metric on <strong>pragmatic</strong> grounds (ambulance needs to get to hospital)</li>
<li>Now people will also have <strong>fundamental normative disagreements</strong> about what should and should not <strong>determine difference</strong></li>
</ul>
</div>
<div id="distance-right" class="quarto-layout-cell" style="flex-basis: 50.0%;justify-content: flex-start;">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="images/medical_distances.jpg" class="img-fluid figure-img" width="380"></p>
<figcaption>From <span class="citation" data-cites="shahid_comparison_2009">Shahid et al. (<a href="#ref-shahid_comparison_2009" role="doc-biblioref">2009</a>)</span></figcaption>
</figure>
</div>
</div>
</div>
</div>
</section>
<section id="satisfying-individual-vs.-group-fairness" class="level2 smaller crunch-title title-09">
<h2 class="smaller crunch-title title-09 anchored" data-anchor-id="satisfying-individual-vs.-group-fairness">Satisfying Individual vs.&nbsp;Group Fairness</h2>
<ul>
<li><p>An algorithm is <strong>individually fair</strong> if, for all individuals <span class="math inline">\(x\)</span> and <span class="math inline">\(y\)</span>, we have</p>
<p><span class="math display">\[
\textsf{dist}(r(x), r(y)) \leq \textsf{dist}(x, y)
\]</span></p>
<p><span class="math inline">\(\implies\)</span> an advertising system must show similar sets of ads to similar users.</p></li>
<li><p>It achieves <strong>group fairness-through-parity</strong> for two groups of users <span class="math inline">\(S\)</span> and <span class="math inline">\(T\)</span> when:</p>
<p><span class="math display">\[
\textsf{dist}(\mathbb{E}_{s \in S}[r(s)], \mathbb{E}_{t \in T}[r(t)]) \leq \varepsilon
\]</span></p>
<p>where <span class="math inline">\(\mathbb{E}_{s \in S}\)</span> and <span class="math inline">\(\mathbb{E}_{t \in T}\)</span> denote the expectation of ads seen by an individual chosen uniformly among <span class="math inline">\(S\)</span> and <span class="math inline">\(T\)</span>. This definition implies that the difference in probability between two groups of seeing a particular ad will be bounded by <span class="math inline">\(\varepsilon\)</span>.</p></li>
<li><p>Given these definitions: Individual fairness&nbsp; <span class="math inline">\(\nimplies\)</span> group fairness, and vice versa! <span class="citation" data-cites="riederer_price_2017">(<a href="#ref-riederer_price_2017" role="doc-biblioref">Riederer and Chaintreau 2017</a>)</span></p></li>
</ul>
</section>
<section id="the-importance-of-not-excluding-race" class="level2 crunch-title title-08">
<h2 class="crunch-title title-08 anchored" data-anchor-id="the-importance-of-not-excluding-race">The Importance of <em>Not</em> Excluding Race!</h2>
<ul>
<li>On HW2 you will see how, on the one hand: <strong>excluding</strong> race from the similarity metric ensures <strong>race-blind fairness</strong></li>
<li>But, on the other hand: race-blind fairness can not only <strong>maintain</strong> but also <strong>amplify</strong> preexisting inequalities</li>
<li>By <strong>including race</strong> in our similarity metric, we can explicitly take this into account!</li>
<li>Ex: someone with a (morally irrelevant) disadvantage due to <strong>birth lottery</strong> who achieves an SAT score of 1400 is <strong>similar to</strong> someone with a (morally irrelevant) advantage due to birth lottery who achieves an SAT score of 1500</li>
</ul>
</section>
<section id="equality-of-opportunity" class="level2 crunch-title crunch-ul crunch-quarto-layout-panel smaller">
<h2 class="crunch-title crunch-ul crunch-quarto-layout-panel smaller anchored" data-anchor-id="equality-of-opportunity">Equality of Opportunity</h2>
<div class="quarto-layout-panel" data-layout="[1,1]">
<div class="quarto-layout-row">
<div id="roemer-left" class="quarto-layout-cell" style="flex-basis: 50.0%;justify-content: flex-start;">
<ul>
<li>This notion (last bullet of the previous slide) is <strong>contentious</strong>, to say the least</li>
<li>But also, crucially: our job is not to <strong>decide the similarity metric unilaterally</strong>!</li>
<li>The <strong>equality of opportunity</strong> approach is <strong>not itself a similarity metric!</strong></li>
<li>It is a <strong>‚Äúmeta-algorithm‚Äù</strong> for <strong>translating</strong> normative positions (consequents of an ethical framework) into <strong>concrete fairness constraints</strong> that you can then impose on ML algorithms</li>
</ul>
</div>
<div id="roemer-right" class="quarto-layout-cell" style="flex-basis: 50.0%;justify-content: flex-start;">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="images/roemer-equality.jpg" class="img-fluid figure-img" width="340"></p>
<figcaption><span class="citation" data-cites="roemer_equality_1998">Roemer (<a href="#ref-roemer_equality_1998" role="doc-biblioref">1998</a>)</span></figcaption>
</figure>
</div>
</div>
</div>
</div>
</section>
<section id="roemers-algorithm" class="level2 smaller crunch-title crunch-li-10">
<h2 class="smaller crunch-title crunch-li-10 anchored" data-anchor-id="roemers-algorithm">Roemer‚Äôs Algorithm</h2>
<ul>
<li>Equality of Opportunity algorithm boils down to (Input 0 = data on individuals <span class="math inline">\(X_i\)</span>):</li>
<li><em>Input 1 (!)</em>: Attributes <span class="math inline">\(J_{\text{advantage}} \subseteq X_i\)</span> that a society (real or hypothetical) considers <strong>normatively relevant</strong> for an outcome, but that people are not <strong>individually responsible</strong> for (e.g., race or nationality via birth lottery)</li>
<li><em>Input 2</em>: Attributes <span class="math inline">\(J_{\text{merit}} \subseteq X_i\)</span> that a society considers people <strong>individually responsible</strong> for (effort, sacrificing short-term pleasure for longer-term benefits, etc.)</li>
<li><i class="bi bi-1-circle"></i>: Set of individuals in society <span class="math inline">\(S\)</span> is <strong>partitioned</strong> into subsets <span class="math inline">\(S_i\)</span>, where <span class="math inline">\(i\)</span> is some combination of particular <strong>values</strong> for the attributes in <span class="math inline">\(X_{\text{advantage}}\)</span></li>
<li><i class="bi bi-2-circle"></i>: Individuals‚Äô <strong>context-sensitive scores</strong> are computed <strong>relative to their group</strong> <span class="math inline">\(S_i\)</span>, as <strong>percentile</strong> of their <span class="math inline">\(X_{\text{merit}}\)</span> value relative to <strong>distribution</strong> of <span class="math inline">\(X_{\text{merit}}\)</span> values across <span class="math inline">\(S_i\)</span></li>
<li><em>Outcome</em>: Now that we have <strong>incorporated social context</strong>, by converting the original <strong>context-free units</strong> (e.g., numeric SAT score) into <strong>context-sensitive units</strong> (percentile of numeric SAT score within distribution of comparable individuals), we can compare people <strong>across groups</strong> on the basis of <strong>context-sensitive</strong> scores!</li>
</ul>
</section>
<section id="an-overly-simplistic-example-more-on-hw2" class="level2 crunch-title inline-90">
<h2 class="crunch-title inline-90 anchored" data-anchor-id="an-overly-simplistic-example-more-on-hw2">An Overly-Simplistic Example (More on HW2!)</h2>
<ul>
<li><span class="math inline">\(\mathbf{x}_i = (x_{i,1}, x_{i,2}, x_{i,3}) = (\texttt{wealth}_i, \texttt{study\_hrs}_i, \texttt{SAT}_i)\)</span></li>
<li><span class="math inline">\(J_{\text{advantage}} = (1) = (\texttt{wealth})\)</span>, <span class="math inline">\(J_{\text{merit}} = (2) = (\texttt{study\_hrs})\)</span></li>
<li><span class="math inline">\(\Rightarrow \texttt{study\_hrs} \rightarrow \texttt{SAT}\)</span> a ‚Äúfair‚Äù pathway</li>
<li><span class="math inline">\(\Rightarrow \texttt{wealth} \rightarrow \texttt{SAT}\)</span> an ‚Äúunfair‚Äù pathway</li>
<li><span class="math inline">\(\Rightarrow\)</span> School admission decisions ‚Äúfair‚Äù to the extent that they capture the <strong>direct effect</strong> <span class="math inline">\(\texttt{study\_hrs} \rightarrow \texttt{SAT} \rightarrow \texttt{admit}\)</span>, but aren‚Äôt affected by <strong>indirect effect</strong> <span class="math inline">\(\texttt{wealth} \rightarrow \texttt{SAT} \rightarrow \texttt{admit}\)</span></li>
</ul>
</section>
<section id="at-a-macro-level" class="level2 smaller">
<h2 class="smaller anchored" data-anchor-id="at-a-macro-level">At a Macro Level!</h2>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="images/roemer.svg" class="img-fluid quarto-figure quarto-figure-center figure-img"></p>
</figure>
</div>
</section>
</section>
<section id="causal-fairness" class="level1" data-stack-name="Causal Fairness">
<h1 data-stack-name="Causal Fairness">Causal Fairness</h1>
<section id="the-state-of-the-art" class="level2 crunch-title">
<h2 class="crunch-title anchored" data-anchor-id="the-state-of-the-art">The State of the Art!</h2>
<ul>
<li>Current state of fairness in AI: measures which explicitly model <strong>causal connections</strong> between variables of interest are most promising for <strong>robust</strong> notions of fairness</li>
<li>Robust in the sense of:
<ul>
<li>Being <strong>normatively desirable</strong> (as in, matching the key tenets of our ethical frameworks) while also being</li>
<li><strong>Descriptively tractable</strong> (as in, concretely implementable in math/code, and transparent enough to allow us to <em>evaluate</em> and <em>update</em> these implementations, using a process like <em>reflective equilibrium</em>).</li>
</ul></li>
</ul>
</section>
<section id="the-antecedent" class="level2">
<h2 class="anchored" data-anchor-id="the-antecedent">The Antecedent</h2>
<ul>
<li>Since it‚Äôs impossible to <strong>eliminate</strong> information about sensitive attributes like race/gender/etc. from our ML algorithms‚Ä¶</li>
<li>Fairness should instead be defined on the basis of <strong>how this sensitive information ‚Äúflows‚Äù through the causal chain of decisions</strong> which lead to an given (observed) outcome</li>
</ul>
</section>
<section id="the-new-object-of-analysis-causal-pathways" class="level2 crunch-title crunch-ul title-09">
<h2 class="crunch-title crunch-ul title-09 anchored" data-anchor-id="the-new-object-of-analysis-causal-pathways">The New Object of Analysis: <em>Causal Pathways</em></h2>
<ul>
<li>Once we have a <strong>model</strong> of the <strong>causal connections</strong> among:
<ul>
<li>Variables that we care about socially/normatively, and</li>
<li>Variables used by a Machine Learning algorithm,</li>
</ul></li>
<li>We can then use techniques developed by statisticians who study <strong>causal inference</strong> to</li>
<li><strong>Block</strong> certain ‚Äúcausal pathways‚Äù that we deem normatively unjustifiable while <strong>allowing</strong> other pathways that we deem to be normatively justifiable.</li>
</ul>
</section>
<section id="causal-fairness-in-hw2" class="level2 crunch-title inline-80">
<h2 class="crunch-title inline-80 anchored" data-anchor-id="causal-fairness-in-hw2">Causal Fairness in HW2</h2>
<ul>
<li>Intuition required to make the jump from <strong>correlational</strong> approach (from statistics and probability generally, and DSAN 5100 specifically!) to <strong>causal</strong> approach!</li>
<li>Causal approach <strong>builds on</strong> correlational, but‚Ä¶</li>
<li><strong>Stricter, directional standard</strong> for <span class="math inline">\(X \rightarrow Y\)</span></li>
<li>Easy cases: find high <strong>correlation</strong> <span class="math inline">\(|\text{corr}(X,Y)|\)</span>, embed in a <strong>causal diagram</strong>, evaluate <span class="math inline">\(\Pr(Y \mid \text{do}(X)) \overset{?}{&gt;} \Pr(Y \mid \neg\text{do}(X))\)</span></li>
<li>Hard cases: can have <span class="math inline">\(\Pr(Y \mid \text{do}(X)) \overset{?}{&gt;} \Pr(Y \mid \neg\text{do}(X))\)</span> even when <span class="math inline">\(\text{corr}(X,Y) = 0\)</span> üò∞ (dw, we‚Äôll get there!)</li>
</ul>
</section>
<section id="causal-building-blocks" class="level2 crunch-ul text-90">
<h2 class="crunch-ul text-90 anchored" data-anchor-id="causal-building-blocks">Causal Building Blocks</h2>
<ul>
<li>DSAN 5100 precedent: nodes in the network <span class="math inline">\(X\)</span>, <span class="math inline">\(Y\)</span> are <strong>Random Variables</strong>, connections <span class="math inline">\(X \leftrightarrow Y\)</span> are <strong>joint distributions</strong> <span class="math inline">\(\Pr(X, Y)\)</span></li>
<li><strong>Directional</strong> edges <span class="math inline">\(X \rightarrow Y\)</span>, then, just represent <strong>conditional</strong> distributions: <span class="math inline">\(X \rightarrow Y\)</span> is <span class="math inline">\(\Pr(Y \mid X)\)</span></li>
<li>Where we‚Äôre going: connections <span class="math inline">\(X \leftrightarrow Y\)</span> represent <strong>unknown but extant causal connections</strong> between <span class="math inline">\(X\)</span> and <span class="math inline">\(Y\)</span>, while <span class="math inline">\(X \rightarrow Y\)</span> represents a <strong>causal relationship</strong> between <span class="math inline">\(X\)</span> and <span class="math inline">\(Y\)</span></li>
<li>Specifically, <span class="math inline">\(X \rightarrow Y\)</span> now means: <strong>an intervention that changes the value of <span class="math inline">\(X\)</span></strong> by <span class="math inline">\(\varepsilon\)</span> <strong>causes a change in the value of <span class="math inline">\(Y\)</span></strong> by <span class="math inline">\(f(\varepsilon)\)</span></li>
</ul>
</section>
<section id="what-is-to-be-done" class="level2">
<h2 class="anchored" data-anchor-id="what-is-to-be-done">What Is To Be Done?</h2>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="images/face_everything_and_rise.jpg" class="img-fluid quarto-figure quarto-figure-center figure-img"></p>
</figure>
</div>
</section>
<section id="face-everything-and-rise-controlled-randomized-experiment-paradigm" class="level2">
<h2 class="anchored" data-anchor-id="face-everything-and-rise-controlled-randomized-experiment-paradigm">Face Everything And Rise: Controlled, Randomized Experiment Paradigm</h2>
<ul>
<li>Find good comparison cases: <strong>Treatment</strong> and <strong>Control</strong></li>
<li>Without a control group, you cannot make inferences!</li>
<li><em>Selecting on the dependent variable‚Ä¶</em></li>
</ul>
</section>
<section id="selecting-on-the-dependent-variable" class="level2 smaller">
<h2 class="smaller anchored" data-anchor-id="selecting-on-the-dependent-variable">Selecting on the Dependent Variable</h2>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="images/school-shootings.jpeg" class="img-fluid figure-img"></p>
<figcaption><a href="https://www.pbs.org/newshour/show/what-research-says-about-identifying-people-who-might-commit-mass-shootings" target="_blank">What ‚Äú‚Äú‚Äúresearch‚Äù‚Äú‚Äù ‚Äú‚Äú‚Äúsays‚Äù‚Äú‚Äù about identifying people who might commit mass shootings</a></figcaption>
</figure>
</div>
<ul>
<li>Jeff‚Äôs rant: If you care about actually solving social issues, this should <strong>infuriate you</strong></li>
</ul>
</section>
<section id="complications-selection" class="level2">
<h2 class="anchored" data-anchor-id="complications-selection">Complications: Selection</h2>
<ul>
<li>Tldr: Why did this person (unit) end up in the treatment group? Why did this other person (unit) end up in the control group?</li>
<li>Are there systematic differences?</li>
<li>Vietnam/Indochina Draft: Why can‚Äôt we just study [men who join the military] versus [men who don‚Äôt], and take the difference as a causal estimate?</li>
</ul>
</section>
<section id="complications-compliance" class="level2 crunch-title">
<h2 class="crunch-title anchored" data-anchor-id="complications-compliance">Complications: Compliance</h2>
<ul>
<li>We want people assigned to treatment to take the treatment, and people assigned to control to take the control</li>
<li>‚ÄúCompliance‚Äù: degree to which this is true in experiment
<ul>
<li>High compliance = most people actually took what they were assigned</li>
<li>Low compliance = lots of people who were assigned to treatment actually took control, and vice-versa</li>
</ul></li>
<li>What problems might exist w.r.t compliance in the Draft?</li>
</ul>
</section>
<section id="next-week-and-hw2-experimental-rightarrow-observational-data" class="level2 crunch-title title-09">
<h2 class="crunch-title title-09 anchored" data-anchor-id="next-week-and-hw2-experimental-rightarrow-observational-data">Next Week and HW2: Experimental <span class="math inline">\(\rightarrow\)</span> Observational Data</h2>
<ul>
<li>In observational studies, researchers have no control over assignment to treatment/control üò®</li>
<li>On the one hand‚Ä¶ Forget Everything And Run [to randomized, controlled experiments], if you can.</li>
<li>On the other hand‚Ä¶ statisticians over the last 4 centuries have developed fancy causal inference tools/techniques to help us Face Everything And Rise üßê</li>
</ul>
</section>
<section id="for-now-matching" class="level2 crunch-title">
<h2 class="crunch-title anchored" data-anchor-id="for-now-matching">For Now: <em>Matching</em></h2>
<ul>
<li>In a <strong>randomized, controlled experiment</strong>, we can <strong>ensure</strong> (since we have control over the <strong>assignment mechanism</strong>) that the <strong>only systematic difference</strong> between <span class="math inline">\(C\)</span> and <span class="math inline">\(T\)</span> is that <span class="math inline">\(T\)</span> received the treatment and <span class="math inline">\(C\)</span> did not</li>
<li>In an <strong>observational study</strong>, we ‚Äúshow up too late‚Äù!</li>
<li>Thus, we no longer refer to <strong>assignment</strong> but to <strong>selection</strong></li>
<li>And, our job is to <strong>figure out</strong> (reverse engineer!) the <strong>selection mechanism</strong>, then <strong>correct for its non-randomness</strong>: basically, we ‚Äútransform‚Äù from observational to experimental setting through <strong>weighting</strong> (üëÄ W02)</li>
</ul>
</section>
</section>
<section id="quick-clarifications-recaps" class="level1" data-stack-name="Recap">
<h1 data-stack-name="Recap">Quick Clarifications / Recaps!</h1>
<section id="clarification-ecological-inference" class="level2">
<h2 class="anchored" data-anchor-id="clarification-ecological-inference">Clarification: Ecological Inference</h2>
<ul>
<li>I gave the worst example for this: generalizing from population to single person (white people <span class="math inline">\(\rightarrow\)</span> Jeff)!</li>
<li>As Trey helpfully pointed out, this is the ‚Äúobvious‚Äù fallacy of stereotyping a person based on group membership</li>
<li>In reality, the ‚Äúecological fallacy‚Äù is more subtly (but just as fallacious-ly) committed from aggregate to slightly-less-aggregate populations!</li>
<li>Example: <a href="https://projects.propublica.org/private-school-demographics/districts/district-of-columbia-public-schools-1100030">DC Public Schools</a> vs.&nbsp;<a href="https://www.myschooldc.org/schools/profile/125">Jackson-Reed</a></li>
</ul>
</section>
<section id="eureka-moment-for-midterm-prep-purposes" class="level2 not-title-slide title-09 crunch-title crunch-ul">
<h2 class="not-title-slide title-09 crunch-title crunch-ul anchored" data-anchor-id="eureka-moment-for-midterm-prep-purposes">Eureka Moment (for Midterm Prep Purposes)</h2>
<div class="hidden">
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="co"># For slides</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a>cbPalette <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"#E69F00"</span>, <span class="st">"#56B4E9"</span>, <span class="st">"#009E73"</span>, <span class="st">"#F0E442"</span>, <span class="st">"#0072B2"</span>, <span class="st">"#D55E00"</span>, <span class="st">"#CC79A7"</span>)</span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="fu">options</span>(<span class="at">ggplot2.discrete.colour =</span> cbPalette)</span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Theme generator, for given sizes</span></span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a>theme_dsan <span class="ot">&lt;-</span> <span class="cf">function</span>(<span class="at">plot_type =</span> <span class="st">"full"</span>) {</span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> (plot_type <span class="sc">==</span> <span class="st">"full"</span>) {</span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a>        custom_base_size <span class="ot">&lt;-</span> <span class="dv">16</span></span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a>    } <span class="cf">else</span> <span class="cf">if</span> (plot_type <span class="sc">==</span> <span class="st">"half"</span>) {</span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true" tabindex="-1"></a>        custom_base_size <span class="ot">&lt;-</span> <span class="dv">22</span></span>
<span id="cb1-11"><a href="#cb1-11" aria-hidden="true" tabindex="-1"></a>    } <span class="cf">else</span> <span class="cf">if</span> (plot_type <span class="sc">==</span> <span class="st">"quarter"</span>) {</span>
<span id="cb1-12"><a href="#cb1-12" aria-hidden="true" tabindex="-1"></a>        custom_base_size <span class="ot">&lt;-</span> <span class="dv">28</span></span>
<span id="cb1-13"><a href="#cb1-13" aria-hidden="true" tabindex="-1"></a>    } <span class="cf">else</span> {</span>
<span id="cb1-14"><a href="#cb1-14" aria-hidden="true" tabindex="-1"></a>        <span class="co"># plot_type == "col"</span></span>
<span id="cb1-15"><a href="#cb1-15" aria-hidden="true" tabindex="-1"></a>        custom_base_size <span class="ot">&lt;-</span> <span class="dv">22</span></span>
<span id="cb1-16"><a href="#cb1-16" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb1-17"><a href="#cb1-17" aria-hidden="true" tabindex="-1"></a>    theme <span class="ot">&lt;-</span> <span class="fu">theme_classic</span>(<span class="at">base_size =</span> custom_base_size) <span class="sc">+</span></span>
<span id="cb1-18"><a href="#cb1-18" aria-hidden="true" tabindex="-1"></a>        <span class="fu">theme</span>(</span>
<span id="cb1-19"><a href="#cb1-19" aria-hidden="true" tabindex="-1"></a>            <span class="at">plot.title =</span> <span class="fu">element_text</span>(<span class="at">hjust =</span> <span class="fl">0.5</span>),</span>
<span id="cb1-20"><a href="#cb1-20" aria-hidden="true" tabindex="-1"></a>            <span class="at">plot.subtitle =</span> <span class="fu">element_text</span>(<span class="at">hjust =</span> <span class="fl">0.5</span>),</span>
<span id="cb1-21"><a href="#cb1-21" aria-hidden="true" tabindex="-1"></a>            <span class="at">legend.title =</span> <span class="fu">element_text</span>(<span class="at">hjust =</span> <span class="fl">0.5</span>),</span>
<span id="cb1-22"><a href="#cb1-22" aria-hidden="true" tabindex="-1"></a>            <span class="at">legend.box.background =</span> <span class="fu">element_rect</span>(<span class="at">colour =</span> <span class="st">"black"</span>)</span>
<span id="cb1-23"><a href="#cb1-23" aria-hidden="true" tabindex="-1"></a>        )</span>
<span id="cb1-24"><a href="#cb1-24" aria-hidden="true" tabindex="-1"></a>    <span class="fu">return</span>(theme)</span>
<span id="cb1-25"><a href="#cb1-25" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb1-26"><a href="#cb1-26" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-27"><a href="#cb1-27" aria-hidden="true" tabindex="-1"></a>knitr<span class="sc">::</span>opts_chunk<span class="sc">$</span><span class="fu">set</span>(<span class="at">fig.align =</span> <span class="st">"center"</span>)</span>
<span id="cb1-28"><a href="#cb1-28" aria-hidden="true" tabindex="-1"></a>g_pointsize <span class="ot">&lt;-</span> <span class="dv">5</span></span>
<span id="cb1-29"><a href="#cb1-29" aria-hidden="true" tabindex="-1"></a>g_linesize <span class="ot">&lt;-</span> <span class="dv">1</span></span>
<span id="cb1-30"><a href="#cb1-30" aria-hidden="true" tabindex="-1"></a><span class="co"># Technically it should always be linewidth</span></span>
<span id="cb1-31"><a href="#cb1-31" aria-hidden="true" tabindex="-1"></a>g_linewidth <span class="ot">&lt;-</span> <span class="dv">1</span></span>
<span id="cb1-32"><a href="#cb1-32" aria-hidden="true" tabindex="-1"></a>g_textsize <span class="ot">&lt;-</span> <span class="dv">14</span></span>
<span id="cb1-33"><a href="#cb1-33" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-34"><a href="#cb1-34" aria-hidden="true" tabindex="-1"></a>remove_legend_title <span class="ot">&lt;-</span> <span class="cf">function</span>() {</span>
<span id="cb1-35"><a href="#cb1-35" aria-hidden="true" tabindex="-1"></a>    <span class="fu">return</span>(<span class="fu">theme</span>(</span>
<span id="cb1-36"><a href="#cb1-36" aria-hidden="true" tabindex="-1"></a>        <span class="at">legend.title =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb1-37"><a href="#cb1-37" aria-hidden="true" tabindex="-1"></a>        <span class="at">legend.spacing.y =</span> <span class="fu">unit</span>(<span class="dv">0</span>, <span class="st">"mm"</span>)</span>
<span id="cb1-38"><a href="#cb1-38" aria-hidden="true" tabindex="-1"></a>    ))</span>
<span id="cb1-39"><a href="#cb1-39" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
</div>
<ul>
<li>I totally forgot to mention: John Stuart Mill, the progenitor of what we today identify as <strong>utilitarianism</strong>, was himself tortured mercilessly, by his father John Mill (bffs with Jeremy Bentham) for the ‚Äúgreater good of society‚Äù!</li>
</ul>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="images/js-mill-eureka.jpg" class="img-fluid quarto-figure quarto-figure-center figure-img"></p>
</figure>
</div>
</section>
</section>
<section id="blasting-off-into-causality" class="level1 title-10 not-title-slide" data-stack-name="Data-Generating Processes">
<h1 class="title-10 not-title-slide" data-stack-name="Data-Generating Processes">Blasting Off Into Causality!</h1>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="images/posadism_causal.jpg" class="img-fluid quarto-figure quarto-figure-center figure-img"></p>
</figure>
</div>
<section id="dgps-and-the-emergence-of-order" class="level2 crunch-title crunch-quarto-layout-panel">
<h2 class="crunch-title crunch-quarto-layout-panel anchored" data-anchor-id="dgps-and-the-emergence-of-order">DGPs and the Emergence of Order</h2>
<div class="quarto-layout-panel" data-layout="[1,1]">
<div class="quarto-layout-row">
<div class="quarto-layout-cell" style="flex-basis: 50.0%;justify-content: flex-start;">
<ul>
<li>Who can guess the state of this process after 10 steps, with 1 person?</li>
<li>10 people? 50? 100? (If they find themselves on the same spot, they stand on each other‚Äôs heads)</li>
<li>100 steps? 1000?</li>
</ul>
</div>
<div class="quarto-layout-cell" style="flex-basis: 50.0%;justify-content: center;">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="images/random_walk.svg" class="img-fluid quarto-figure quarto-figure-center figure-img" width="430"></p>
</figure>
</div>
</div>
</div>
</div>
</section>
<section id="the-result-16-steps" class="level2">
<h2 class="anchored" data-anchor-id="the-result-16-steps">The Result: 16 Steps</h2>
<div class="cell" data-layout-align="center">
<details class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb2"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tibble)</span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggExtra)</span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(dplyr)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
<div class="cell-output cell-output-stderr">
<pre><code>
Attaching package: 'dplyr'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>The following objects are masked from 'package:stats':

    filter, lag</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>The following objects are masked from 'package:base':

    intersect, setdiff, setequal, union</code></pre>
</div>
<details class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb6"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyr)</span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a><span class="co"># From McElreath!</span></span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a>gen_histo <span class="ot">&lt;-</span> <span class="cf">function</span>(reps, num_steps) {</span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a>  support <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="sc">-</span><span class="dv">1</span>,<span class="dv">1</span>)</span>
<span id="cb6-5"><a href="#cb6-5" aria-hidden="true" tabindex="-1"></a>  pos <span class="ot">&lt;-</span><span class="fu">replicate</span>(reps, <span class="fu">sum</span>(<span class="fu">sample</span>(support,num_steps,<span class="at">replace=</span><span class="cn">TRUE</span>,<span class="at">prob=</span><span class="fu">c</span>(<span class="fl">0.5</span>,<span class="fl">0.5</span>))))</span>
<span id="cb6-6"><a href="#cb6-6" aria-hidden="true" tabindex="-1"></a>  <span class="co">#print(mean(pos))</span></span>
<span id="cb6-7"><a href="#cb6-7" aria-hidden="true" tabindex="-1"></a>  <span class="co">#print(var(pos))</span></span>
<span id="cb6-8"><a href="#cb6-8" aria-hidden="true" tabindex="-1"></a>  pos_df <span class="ot">&lt;-</span> <span class="fu">tibble</span>(<span class="at">x=</span>pos)</span>
<span id="cb6-9"><a href="#cb6-9" aria-hidden="true" tabindex="-1"></a>  clt_distr <span class="ot">&lt;-</span> <span class="cf">function</span>(x) <span class="fu">dnorm</span>(x, <span class="dv">0</span>, <span class="fu">sqrt</span>(num_steps))</span>
<span id="cb6-10"><a href="#cb6-10" aria-hidden="true" tabindex="-1"></a>  plot <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(pos_df, <span class="fu">aes</span>(<span class="at">x=</span>x)) <span class="sc">+</span></span>
<span id="cb6-11"><a href="#cb6-11" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_histogram</span>(<span class="fu">aes</span>(<span class="at">y =</span> <span class="fu">after_stat</span>(density)), <span class="at">fill=</span>cbPalette[<span class="dv">1</span>], <span class="at">binwidth =</span> <span class="dv">2</span>) <span class="sc">+</span></span>
<span id="cb6-12"><a href="#cb6-12" aria-hidden="true" tabindex="-1"></a>    <span class="fu">stat_function</span>(<span class="at">fun =</span> clt_distr) <span class="sc">+</span></span>
<span id="cb6-13"><a href="#cb6-13" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme_dsan</span>(<span class="st">"quarter"</span>) <span class="sc">+</span></span>
<span id="cb6-14"><a href="#cb6-14" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme</span>(<span class="at">title=</span><span class="fu">element_text</span>(<span class="at">size=</span><span class="dv">16</span>)) <span class="sc">+</span></span>
<span id="cb6-15"><a href="#cb6-15" aria-hidden="true" tabindex="-1"></a>    <span class="fu">labs</span>(</span>
<span id="cb6-16"><a href="#cb6-16" aria-hidden="true" tabindex="-1"></a>      <span class="at">title=</span><span class="fu">paste0</span>(reps,<span class="st">" Random Walks, "</span>,num_steps,<span class="st">" Steps"</span>)</span>
<span id="cb6-17"><a href="#cb6-17" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb6-18"><a href="#cb6-18" aria-hidden="true" tabindex="-1"></a>  <span class="fu">return</span>(plot)</span>
<span id="cb6-19"><a href="#cb6-19" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb6-20"><a href="#cb6-20" aria-hidden="true" tabindex="-1"></a>gen_walkplot <span class="ot">&lt;-</span> <span class="cf">function</span>(num_people, num_steps, <span class="at">opacity=</span><span class="fl">0.15</span>) {</span>
<span id="cb6-21"><a href="#cb6-21" aria-hidden="true" tabindex="-1"></a>  support <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="sc">-</span><span class="dv">1</span>, <span class="dv">1</span>)</span>
<span id="cb6-22"><a href="#cb6-22" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Unique id for each person</span></span>
<span id="cb6-23"><a href="#cb6-23" aria-hidden="true" tabindex="-1"></a>  pid <span class="ot">&lt;-</span> <span class="fu">seq</span>(<span class="dv">1</span>, num_people)</span>
<span id="cb6-24"><a href="#cb6-24" aria-hidden="true" tabindex="-1"></a>  pid_tib <span class="ot">&lt;-</span> <span class="fu">tibble</span>(pid)</span>
<span id="cb6-25"><a href="#cb6-25" aria-hidden="true" tabindex="-1"></a>  pos_df <span class="ot">&lt;-</span> <span class="fu">tibble</span>()</span>
<span id="cb6-26"><a href="#cb6-26" aria-hidden="true" tabindex="-1"></a>  end_df <span class="ot">&lt;-</span> <span class="fu">tibble</span>()</span>
<span id="cb6-27"><a href="#cb6-27" aria-hidden="true" tabindex="-1"></a>  all_steps <span class="ot">&lt;-</span> <span class="fu">t</span>(<span class="fu">replicate</span>(num_people, <span class="fu">sample</span>(support, num_steps, <span class="at">replace =</span> <span class="cn">TRUE</span>, <span class="at">prob =</span> <span class="fu">c</span>(<span class="fl">0.5</span>, <span class="fl">0.5</span>))))</span>
<span id="cb6-28"><a href="#cb6-28" aria-hidden="true" tabindex="-1"></a>  csums <span class="ot">&lt;-</span> <span class="fu">t</span>(<span class="fu">apply</span>(all_steps, <span class="dv">1</span>, cumsum))</span>
<span id="cb6-29"><a href="#cb6-29" aria-hidden="true" tabindex="-1"></a>  csums <span class="ot">&lt;-</span> <span class="fu">cbind</span>(<span class="dv">0</span>, csums)</span>
<span id="cb6-30"><a href="#cb6-30" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Last col is the ending positions</span></span>
<span id="cb6-31"><a href="#cb6-31" aria-hidden="true" tabindex="-1"></a>  ending_pos <span class="ot">&lt;-</span> csums[, <span class="fu">dim</span>(csums)[<span class="dv">2</span>]]</span>
<span id="cb6-32"><a href="#cb6-32" aria-hidden="true" tabindex="-1"></a>  end_tib <span class="ot">&lt;-</span> <span class="fu">tibble</span>(<span class="at">pid =</span> <span class="fu">seq</span>(<span class="dv">1</span>, num_people), <span class="at">endpos =</span> ending_pos, <span class="at">x =</span> num_steps)</span>
<span id="cb6-33"><a href="#cb6-33" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Now convert to tibble</span></span>
<span id="cb6-34"><a href="#cb6-34" aria-hidden="true" tabindex="-1"></a>  ctib <span class="ot">&lt;-</span> <span class="fu">as_tibble</span>(csums, <span class="at">name_repair =</span> <span class="st">"none"</span>)</span>
<span id="cb6-35"><a href="#cb6-35" aria-hidden="true" tabindex="-1"></a>  merged_tib <span class="ot">&lt;-</span> <span class="fu">bind_cols</span>(pid_tib, ctib)</span>
<span id="cb6-36"><a href="#cb6-36" aria-hidden="true" tabindex="-1"></a>  long_tib <span class="ot">&lt;-</span> merged_tib <span class="sc">%&gt;%</span> <span class="fu">pivot_longer</span>(<span class="sc">!</span>pid)</span>
<span id="cb6-37"><a href="#cb6-37" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Convert name -&gt; step_num</span></span>
<span id="cb6-38"><a href="#cb6-38" aria-hidden="true" tabindex="-1"></a>  long_tib <span class="ot">&lt;-</span> long_tib <span class="sc">%&gt;%</span> <span class="fu">mutate</span>(<span class="at">step_num =</span> <span class="fu">strtoi</span>(<span class="fu">gsub</span>(<span class="st">"V"</span>, <span class="st">""</span>, name)) <span class="sc">-</span> <span class="dv">1</span>)</span>
<span id="cb6-39"><a href="#cb6-39" aria-hidden="true" tabindex="-1"></a>  <span class="co"># print(end_df)</span></span>
<span id="cb6-40"><a href="#cb6-40" aria-hidden="true" tabindex="-1"></a>  grid_color <span class="ot">&lt;-</span> <span class="fu">rgb</span>(<span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">0</span>, <span class="fl">0.1</span>)</span>
<span id="cb6-41"><a href="#cb6-41" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-42"><a href="#cb6-42" aria-hidden="true" tabindex="-1"></a>  <span class="co"># And plot!</span></span>
<span id="cb6-43"><a href="#cb6-43" aria-hidden="true" tabindex="-1"></a>  walkplot <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(</span>
<span id="cb6-44"><a href="#cb6-44" aria-hidden="true" tabindex="-1"></a>      long_tib,</span>
<span id="cb6-45"><a href="#cb6-45" aria-hidden="true" tabindex="-1"></a>      <span class="fu">aes</span>(</span>
<span id="cb6-46"><a href="#cb6-46" aria-hidden="true" tabindex="-1"></a>          <span class="at">x =</span> step_num,</span>
<span id="cb6-47"><a href="#cb6-47" aria-hidden="true" tabindex="-1"></a>          <span class="at">y =</span> value,</span>
<span id="cb6-48"><a href="#cb6-48" aria-hidden="true" tabindex="-1"></a>          <span class="at">group =</span> pid,</span>
<span id="cb6-49"><a href="#cb6-49" aria-hidden="true" tabindex="-1"></a>          <span class="co"># color=factor(label)</span></span>
<span id="cb6-50"><a href="#cb6-50" aria-hidden="true" tabindex="-1"></a>      )</span>
<span id="cb6-51"><a href="#cb6-51" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb6-52"><a href="#cb6-52" aria-hidden="true" tabindex="-1"></a>      <span class="fu">geom_line</span>(<span class="at">linewidth =</span> g_linesize, <span class="at">alpha =</span> opacity, <span class="at">color =</span> cbPalette[<span class="dv">1</span>]) <span class="sc">+</span></span>
<span id="cb6-53"><a href="#cb6-53" aria-hidden="true" tabindex="-1"></a>      <span class="fu">geom_point</span>(<span class="at">data =</span> end_tib, <span class="fu">aes</span>(<span class="at">x =</span> x, <span class="at">y =</span> endpos), <span class="at">alpha =</span> <span class="dv">0</span>) <span class="sc">+</span></span>
<span id="cb6-54"><a href="#cb6-54" aria-hidden="true" tabindex="-1"></a>      <span class="fu">scale_x_continuous</span>(<span class="at">breaks =</span> <span class="fu">seq</span>(<span class="dv">0</span>, num_steps, num_steps <span class="sc">/</span> <span class="dv">4</span>)) <span class="sc">+</span></span>
<span id="cb6-55"><a href="#cb6-55" aria-hidden="true" tabindex="-1"></a>      <span class="fu">scale_y_continuous</span>(<span class="at">breaks =</span> <span class="fu">seq</span>(<span class="sc">-</span><span class="dv">20</span>, <span class="dv">20</span>, <span class="dv">10</span>)) <span class="sc">+</span></span>
<span id="cb6-56"><a href="#cb6-56" aria-hidden="true" tabindex="-1"></a>      <span class="fu">theme_dsan</span>(<span class="st">"quarter"</span>) <span class="sc">+</span></span>
<span id="cb6-57"><a href="#cb6-57" aria-hidden="true" tabindex="-1"></a>      <span class="fu">theme</span>(</span>
<span id="cb6-58"><a href="#cb6-58" aria-hidden="true" tabindex="-1"></a>          <span class="at">legend.position =</span> <span class="st">"none"</span>,</span>
<span id="cb6-59"><a href="#cb6-59" aria-hidden="true" tabindex="-1"></a>          <span class="at">title =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">16</span>)</span>
<span id="cb6-60"><a href="#cb6-60" aria-hidden="true" tabindex="-1"></a>      ) <span class="sc">+</span></span>
<span id="cb6-61"><a href="#cb6-61" aria-hidden="true" tabindex="-1"></a>      <span class="fu">theme</span>(</span>
<span id="cb6-62"><a href="#cb6-62" aria-hidden="true" tabindex="-1"></a>          <span class="at">panel.grid.major.y =</span> <span class="fu">element_line</span>(<span class="at">color =</span> grid_color, <span class="at">linewidth =</span> <span class="dv">1</span>, <span class="at">linetype =</span> <span class="dv">1</span>)</span>
<span id="cb6-63"><a href="#cb6-63" aria-hidden="true" tabindex="-1"></a>      ) <span class="sc">+</span></span>
<span id="cb6-64"><a href="#cb6-64" aria-hidden="true" tabindex="-1"></a>      <span class="fu">labs</span>(</span>
<span id="cb6-65"><a href="#cb6-65" aria-hidden="true" tabindex="-1"></a>          <span class="at">title =</span> <span class="fu">paste0</span>(num_people, <span class="st">" Random Walks, "</span>, num_steps, <span class="st">" Steps"</span>),</span>
<span id="cb6-66"><a href="#cb6-66" aria-hidden="true" tabindex="-1"></a>          <span class="at">x =</span> <span class="st">"Number of Steps"</span>,</span>
<span id="cb6-67"><a href="#cb6-67" aria-hidden="true" tabindex="-1"></a>          <span class="at">y =</span> <span class="st">"Position"</span></span>
<span id="cb6-68"><a href="#cb6-68" aria-hidden="true" tabindex="-1"></a>      )</span>
<span id="cb6-69"><a href="#cb6-69" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb6-70"><a href="#cb6-70" aria-hidden="true" tabindex="-1"></a>wp1 <span class="ot">&lt;-</span> <span class="fu">gen_walkplot</span>(<span class="dv">500</span>, <span class="dv">16</span>, <span class="fl">0.05</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: The `x` argument of `as_tibble.matrix()` must have unique column names if
`.name_repair` is omitted as of tibble 2.0.0.
‚Ñπ Using compatibility `.name_repair`.</code></pre>
</div>
<details class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb8"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggMarginal</span>(wp1, <span class="at">margins =</span> <span class="st">"y"</span>, <span class="at">type =</span> <span class="st">"histogram"</span>, <span class="at">yparams =</span> <span class="fu">list</span>(<span class="at">binwidth =</span> <span class="dv">1</span>))</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="index_files/figure-html/random-walk-16-1.png" class="img-fluid quarto-figure quarto-figure-center figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="the-result-64-steps" class="level2">
<h2 class="anchored" data-anchor-id="the-result-64-steps">The Result: 64 Steps</h2>
<div class="cell" data-layout-align="center">
<details class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb9"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggExtra)</span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a>wp2 <span class="ot">&lt;-</span> <span class="fu">gen_walkplot</span>(<span class="dv">5000</span>,<span class="dv">64</span>,<span class="fl">0.008</span>) <span class="sc">+</span></span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ylim</span>(<span class="sc">-</span><span class="dv">30</span>,<span class="dv">30</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
<div class="cell-output cell-output-stderr">
<pre><code>Scale for y is already present.
Adding another scale for y, which will replace the existing scale.</code></pre>
</div>
<details class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb11"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggMarginal</span>(wp2, <span class="at">margins =</span> <span class="st">"y"</span>, <span class="at">type =</span> <span class="st">"histogram"</span>, <span class="at">yparams =</span> <span class="fu">list</span>(<span class="at">binwidth =</span> <span class="dv">1</span>))</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="index_files/figure-html/random-walk-64-1.png" class="img-fluid quarto-figure quarto-figure-center figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="mathematicalscientific-modeling" class="level2 smaller">
<h2 class="smaller anchored" data-anchor-id="mathematicalscientific-modeling">‚ÄúMathematical/Scientific Modeling‚Äù</h2>
<ul>
<li>Thing we observe (poking out of water): <strong>data</strong></li>
<li>Hidden but possibly discoverable through deeper investigation (ecosystem under surface): <strong>model</strong> / <strong>DGP</strong></li>
</ul>
<!-- My sincere belief and definitely not an image forwarded to me unironically by a family member when I was a tween -->
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="images/fwds_from_grandma.jpg" class="img-fluid quarto-figure quarto-figure-center figure-img"></p>
</figure>
</div>
</section>
<section id="so-whats-the-problem" class="level2 crunch-title crunch-ul crunch-li-8 inline-90">
<h2 class="crunch-title crunch-ul crunch-li-8 inline-90 anchored" data-anchor-id="so-whats-the-problem">So What‚Äôs the Problem?</h2>
<ul>
<li>Non-probabilistic models: High potential for being garbage
<ul>
<li><em>tldr: even if SUPER certain, using <span class="math inline">\(\Pr(\mathcal{H}) = 1-\varepsilon\)</span> with tiny <span class="math inline">\(\varepsilon\)</span> has literal life-saving advantages</em> <span class="citation" data-cites="finetti_probability_1972">(<a href="#ref-finetti_probability_1972" role="doc-biblioref">Finetti 1972</a>)</span></li>
</ul></li>
<li>Probabilistic models: Getting there, still looking at ‚Äúsurface‚Äù
<ul>
<li>Of the <span class="math inline">\(N = 100\)</span> times we observed event <span class="math inline">\(X\)</span> occurring, event <span class="math inline">\(Y\)</span> also occurred <span class="math inline">\(90\)</span> of those times</li>
<li><span class="math inline">\(\implies \Pr(Y \mid X) = \frac{\#[X, Y]}{\#[X]} = \frac{90}{100} = 0.9\)</span></li>
</ul></li>
<li>Causal models: Does <span class="math inline">\(Y\)</span> happen <strong>because of</strong> <span class="math inline">\(X\)</span> happening? For that, need to start modeling <strong>what‚Äôs happening under the surface</strong> making <span class="math inline">\(X\)</span> and <span class="math inline">\(Y\)</span> <strong>‚Äúpop up‚Äù together</strong> so often</li>
</ul>
</section>
</section>
<section id="causal-inference" class="level1" data-stack-name="Causal Inference">
<h1 data-stack-name="Causal Inference">Causal Inference</h1>
<section id="the-intuitive-but-boring-problem-of-causal-inference" class="level2 title-06">
<h2 class="title-06 anchored" data-anchor-id="the-intuitive-but-boring-problem-of-causal-inference">The <em>Intuitive But Boring</em> Problem of Causal Inference</h2>
<div class="columns">
<div class="column" style="width:65%;">
<div class="cell" data-layout-align="center">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb12"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(dplyr)</span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a>ga_lawyers <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">21362</span>, <span class="dv">22254</span>, <span class="dv">23134</span>, <span class="dv">23698</span>, <span class="dv">24367</span>, <span class="dv">24930</span>, <span class="dv">25632</span>, <span class="dv">26459</span>, <span class="dv">27227</span>, <span class="dv">27457</span>)</span>
<span id="cb12-4"><a href="#cb12-4" aria-hidden="true" tabindex="-1"></a>ski_df <span class="ot">&lt;-</span> tibble<span class="sc">::</span><span class="fu">tribble</span>(</span>
<span id="cb12-5"><a href="#cb12-5" aria-hidden="true" tabindex="-1"></a>  <span class="sc">~</span>year, <span class="sc">~</span>varname, <span class="sc">~</span>value,</span>
<span id="cb12-6"><a href="#cb12-6" aria-hidden="true" tabindex="-1"></a>  <span class="dv">2000</span>, <span class="st">"ski_revenue"</span>, <span class="dv">1551</span>,</span>
<span id="cb12-7"><a href="#cb12-7" aria-hidden="true" tabindex="-1"></a>  <span class="dv">2001</span>, <span class="st">"ski_revenue"</span>, <span class="dv">1635</span>,</span>
<span id="cb12-8"><a href="#cb12-8" aria-hidden="true" tabindex="-1"></a>  <span class="dv">2002</span>, <span class="st">"ski_revenue"</span>, <span class="dv">1801</span>,</span>
<span id="cb12-9"><a href="#cb12-9" aria-hidden="true" tabindex="-1"></a>  <span class="dv">2003</span>, <span class="st">"ski_revenue"</span>, <span class="dv">1827</span>,</span>
<span id="cb12-10"><a href="#cb12-10" aria-hidden="true" tabindex="-1"></a>  <span class="dv">2004</span>, <span class="st">"ski_revenue"</span>, <span class="dv">1956</span>,</span>
<span id="cb12-11"><a href="#cb12-11" aria-hidden="true" tabindex="-1"></a>  <span class="dv">2005</span>, <span class="st">"ski_revenue"</span>, <span class="dv">1989</span>,</span>
<span id="cb12-12"><a href="#cb12-12" aria-hidden="true" tabindex="-1"></a>  <span class="dv">2006</span>, <span class="st">"ski_revenue"</span>, <span class="dv">2178</span>,</span>
<span id="cb12-13"><a href="#cb12-13" aria-hidden="true" tabindex="-1"></a>  <span class="dv">2007</span>, <span class="st">"ski_revenue"</span>, <span class="dv">2257</span>,</span>
<span id="cb12-14"><a href="#cb12-14" aria-hidden="true" tabindex="-1"></a>  <span class="dv">2008</span>, <span class="st">"ski_revenue"</span>, <span class="dv">2476</span>,</span>
<span id="cb12-15"><a href="#cb12-15" aria-hidden="true" tabindex="-1"></a>  <span class="dv">2009</span>, <span class="st">"ski_revenue"</span>, <span class="dv">2438</span>,</span>
<span id="cb12-16"><a href="#cb12-16" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb12-17"><a href="#cb12-17" aria-hidden="true" tabindex="-1"></a>ski_mean <span class="ot">&lt;-</span> <span class="fu">mean</span>(ski_df<span class="sc">$</span>value)</span>
<span id="cb12-18"><a href="#cb12-18" aria-hidden="true" tabindex="-1"></a>ski_sd <span class="ot">&lt;-</span> <span class="fu">sd</span>(ski_df<span class="sc">$</span>value)</span>
<span id="cb12-19"><a href="#cb12-19" aria-hidden="true" tabindex="-1"></a>ski_df <span class="ot">&lt;-</span> ski_df <span class="sc">%&gt;%</span> <span class="fu">mutate</span>(<span class="at">val_scaled =</span> <span class="dv">12</span><span class="sc">*</span>value, <span class="at">val_norm =</span> (value <span class="sc">-</span> ski_mean)<span class="sc">/</span>ski_sd)</span>
<span id="cb12-20"><a href="#cb12-20" aria-hidden="true" tabindex="-1"></a>law_df <span class="ot">&lt;-</span> tibble<span class="sc">::</span><span class="fu">tibble</span>(<span class="at">year=</span><span class="dv">2000</span><span class="sc">:</span><span class="dv">2009</span>, <span class="at">varname=</span><span class="st">"ga_lawyers"</span>, <span class="at">value=</span>ga_lawyers)</span>
<span id="cb12-21"><a href="#cb12-21" aria-hidden="true" tabindex="-1"></a>law_mean <span class="ot">&lt;-</span> <span class="fu">mean</span>(law_df<span class="sc">$</span>value)</span>
<span id="cb12-22"><a href="#cb12-22" aria-hidden="true" tabindex="-1"></a>law_sd <span class="ot">&lt;-</span> <span class="fu">sd</span>(law_df<span class="sc">$</span>value)</span>
<span id="cb12-23"><a href="#cb12-23" aria-hidden="true" tabindex="-1"></a>law_df <span class="ot">&lt;-</span> law_df <span class="sc">%&gt;%</span> <span class="fu">mutate</span>(<span class="at">val_norm =</span> (value <span class="sc">-</span> law_mean)<span class="sc">/</span>law_sd)</span>
<span id="cb12-24"><a href="#cb12-24" aria-hidden="true" tabindex="-1"></a>spur_df <span class="ot">&lt;-</span> dplyr<span class="sc">::</span><span class="fu">bind_rows</span>(ski_df, law_df)</span>
<span id="cb12-25"><a href="#cb12-25" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(spur_df, <span class="fu">aes</span>(<span class="at">x=</span>year, <span class="at">y=</span>val_norm, <span class="at">color=</span><span class="fu">factor</span>(varname, <span class="at">labels =</span> <span class="fu">c</span>(<span class="st">"Ski Revenue"</span>,<span class="st">"Lawyers in Georgia"</span>)))) <span class="sc">+</span></span>
<span id="cb12-26"><a href="#cb12-26" aria-hidden="true" tabindex="-1"></a>  <span class="fu">stat_smooth</span>(<span class="at">method=</span><span class="st">"loess"</span>, <span class="at">se=</span><span class="cn">FALSE</span>) <span class="sc">+</span></span>
<span id="cb12-27"><a href="#cb12-27" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">size=</span>g_pointsize<span class="sc">/</span><span class="fl">1.5</span>) <span class="sc">+</span></span>
<span id="cb12-28"><a href="#cb12-28" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(</span>
<span id="cb12-29"><a href="#cb12-29" aria-hidden="true" tabindex="-1"></a>    <span class="at">fill=</span><span class="st">""</span>,</span>
<span id="cb12-30"><a href="#cb12-30" aria-hidden="true" tabindex="-1"></a>    <span class="at">title=</span><span class="st">"Ski Revenue vs. Georgia Lawyers"</span>,</span>
<span id="cb12-31"><a href="#cb12-31" aria-hidden="true" tabindex="-1"></a>    <span class="at">x=</span><span class="st">"Year"</span>,</span>
<span id="cb12-32"><a href="#cb12-32" aria-hidden="true" tabindex="-1"></a>    <span class="at">color=</span><span class="st">"Correlation: 99.2%"</span>,</span>
<span id="cb12-33"><a href="#cb12-33" aria-hidden="true" tabindex="-1"></a>    <span class="at">linetype=</span><span class="cn">NULL</span></span>
<span id="cb12-34"><a href="#cb12-34" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb12-35"><a href="#cb12-35" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_dsan</span>() <span class="sc">+</span></span>
<span id="cb12-36"><a href="#cb12-36" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_continuous</span>(</span>
<span id="cb12-37"><a href="#cb12-37" aria-hidden="true" tabindex="-1"></a>    <span class="at">breaks=</span><span class="fu">seq</span>(<span class="at">from=</span><span class="dv">2000</span>, <span class="at">to=</span><span class="dv">2014</span>, <span class="at">by=</span><span class="dv">2</span>)</span>
<span id="cb12-38"><a href="#cb12-38" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb12-39"><a href="#cb12-39" aria-hidden="true" tabindex="-1"></a>  <span class="co">#scale_y_continuous(</span></span>
<span id="cb12-40"><a href="#cb12-40" aria-hidden="true" tabindex="-1"></a>  <span class="co">#  name="Total Revenue, Ski Facilities (Million USD)",</span></span>
<span id="cb12-41"><a href="#cb12-41" aria-hidden="true" tabindex="-1"></a>  <span class="co">#  sec.axis = sec_axis(~ . * law_sd + law_mean, name = "Number of Lawyers in Georgia")</span></span>
<span id="cb12-42"><a href="#cb12-42" aria-hidden="true" tabindex="-1"></a>  <span class="co">#) +</span></span>
<span id="cb12-43"><a href="#cb12-43" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_y_continuous</span>(<span class="at">breaks =</span> <span class="sc">-</span><span class="dv">1</span><span class="sc">:</span><span class="dv">1</span>,</span>
<span id="cb12-44"><a href="#cb12-44" aria-hidden="true" tabindex="-1"></a>    <span class="at">labels =</span> <span class="sc">~</span> . <span class="sc">*</span> <span class="fu">round</span>(ski_sd,<span class="dv">1</span>) <span class="sc">+</span> <span class="fu">round</span>(ski_mean,<span class="dv">1</span>),</span>
<span id="cb12-45"><a href="#cb12-45" aria-hidden="true" tabindex="-1"></a>    <span class="at">name=</span><span class="st">"Total Revenue, Ski Facilities (Million USD)"</span>,</span>
<span id="cb12-46"><a href="#cb12-46" aria-hidden="true" tabindex="-1"></a>    <span class="at">sec.axis =</span> <span class="fu">sec_axis</span>(<span class="sc">~</span> . <span class="sc">*</span> law_sd <span class="sc">+</span> law_mean, <span class="at">name =</span> <span class="st">"Number of Lawyers in Georgia"</span>)) <span class="sc">+</span></span>
<span id="cb12-47"><a href="#cb12-47" aria-hidden="true" tabindex="-1"></a>  <span class="fu">expand_limits</span>(<span class="at">x=</span><span class="dv">2010</span>) <span class="sc">+</span></span>
<span id="cb12-48"><a href="#cb12-48" aria-hidden="true" tabindex="-1"></a>  <span class="co">#geom_hline(aes(yintercept=x, color="Mean Values"), as.data.frame(list(x=0)), linewidth=0.75, alpha=1.0, show.legend = TRUE) +</span></span>
<span id="cb12-49"><a href="#cb12-49" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_color_manual</span>(</span>
<span id="cb12-50"><a href="#cb12-50" aria-hidden="true" tabindex="-1"></a>    <span class="at">breaks=</span><span class="fu">c</span>(<span class="st">'Ski Revenue'</span>, <span class="st">'Lawyers in Georgia'</span>),</span>
<span id="cb12-51"><a href="#cb12-51" aria-hidden="true" tabindex="-1"></a>    <span class="at">values=</span><span class="fu">c</span>(<span class="st">'Ski Revenue'</span><span class="ot">=</span>cbPalette[<span class="dv">1</span>], <span class="st">'Lawyers in Georgia'</span><span class="ot">=</span>cbPalette[<span class="dv">2</span>])</span>
<span id="cb12-52"><a href="#cb12-52" aria-hidden="true" tabindex="-1"></a>  )</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stderr">
<pre><code>`geom_smooth()` using formula = 'y ~ x'</code></pre>
</div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="index_files/figure-html/ski-revenue-lawyers-1.png" class="img-fluid quarto-figure quarto-figure-center figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</div><div class="column" style="width:35%;">
<div class="cell" data-layout-align="center">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb14"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="fu">cor</span>(ski_df<span class="sc">$</span>value, law_df<span class="sc">$</span>value)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 0.9921178</code></pre>
</div>
</div>
<div style="font-size: 50% !important;">
<p>(Based on <a href="http://web.archive.org/web/20191006000802/http://tylervigen.com/view_correlation?id=29272" target="_blank">Spurious Correlations</a>, Tyler Vigen)</p>
</div>
<ul>
<li>This, however, is only a <em>mini-boss</em>. Beyond it lies the truly invincible <strong>FINAL BOSS</strong>‚Ä¶ üôÄ</li>
</ul>
</div>
</div>
</section>
<section id="the-fundamental-problem-of-causal-inference" class="level2 crunch-title crunch-ul crunch-callout title-07">
<h2 class="crunch-title crunch-ul crunch-callout title-07 anchored" data-anchor-id="the-fundamental-problem-of-causal-inference">The <em>Fundamental</em> Problem of Causal Inference</h2>
<p>The only workable definition of ‚Äú<span class="math inline">\(X\)</span> causes <span class="math inline">\(Y\)</span>‚Äù:</p>
<div class="callout callout-style-default callout-note no-icon callout-titled" title="<i class='bi bi-info-circle pe-1'></i> Defining Causality">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
<span class="screen-reader-only">Note</span><i class="bi bi-info-circle pe-1"></i> Defining Causality
</div>
</div>
<div class="callout-body-container callout-body">
<p><span class="math inline">\(X\)</span> causes <span class="math inline">\(Y\)</span> if and only if:</p>
<ol type="1">
<li><span class="math inline">\(X\)</span> <em>temporally precedes</em> <span class="math inline">\(Y\)</span> and</li>
<li><ul>
<li>In <strong>two worlds</strong> <span class="math inline">\(W_0\)</span> and <span class="math inline">\(W_1\)</span> where</li>
<li>everything is exactly the same <strong>except that</strong> <span class="math inline">\(X = 0\)</span> in <span class="math inline">\(W_0\)</span> and <span class="math inline">\(X = 1\)</span> in <span class="math inline">\(W_1\)</span>,</li>
<li><span class="math inline">\(Y = 0\)</span> in <span class="math inline">\(W_0\)</span> and <span class="math inline">\(Y = 1\)</span> in <span class="math inline">\(W_1\)</span>.</li>
</ul></li>
</ol>
<p><span class="citation" data-cites="hume_treatise_1739">(<a href="#ref-hume_treatise_1739" role="doc-biblioref">Hume 1739</a>, ruining everything as usual üò§)</span></p>
</div>
</div>
<ul>
<li>The problem? We live in <strong>one</strong> world, not two identical worlds simultaneously üò≠</li>
</ul>
</section>
<section id="what-is-to-be-done-1" class="level2">
<h2 class="anchored" data-anchor-id="what-is-to-be-done-1">What Is To Be Done?</h2>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="images/face_everything_and_rise.jpg" class="img-fluid quarto-figure quarto-figure-center figure-img"></p>
</figure>
</div>
</section>
<section id="face-everything-and-rise-controlled-randomized-experiment-paradigm-1" class="level2">
<h2 class="anchored" data-anchor-id="face-everything-and-rise-controlled-randomized-experiment-paradigm-1">Face Everything And Rise: Controlled, Randomized Experiment Paradigm</h2>
<ul>
<li>Find good comparison cases: <strong>Treatment</strong> and <strong>Control</strong></li>
<li>Without a control group, you cannot make inferences!</li>
<li><em>Selecting on the dependent variable‚Ä¶</em></li>
</ul>
</section>
<section id="selecting-on-the-dependent-variable-1" class="level2 smaller title-12">
<h2 class="smaller title-12 anchored" data-anchor-id="selecting-on-the-dependent-variable-1">Selecting on the Dependent Variable</h2>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="images/school-shootings.jpeg" class="img-fluid figure-img"></p>
<figcaption><a href="https://www.pbs.org/newshour/show/what-research-says-about-identifying-people-who-might-commit-mass-shootings" target="_blank">What ‚Äú‚Äú‚Äúresearch‚Äù‚Äú‚Äù ‚Äú‚Äú‚Äúsays‚Äù‚Äú‚Äù about identifying people who might commit mass shootings</a></figcaption>
</figure>
</div>
<ul>
<li>Jeff‚Äôs ABHYSIOWDCI claim: If we care about intervening to reduce social ills, this literally has negative value (Goes up to zero value if you don‚Äôt publish it though! üòâ)</li>
</ul>
<div class="text-70">
<p><em>(<strong>A</strong>nnoying <strong>B</strong>ut <strong>H</strong>opefully <strong>Y</strong>ou‚Äôll <strong>S</strong>ee the <strong>I</strong>mportance <strong>O</strong>nce <strong>W</strong>e <strong>D</strong>igest <strong>C</strong>ausal <strong>I</strong>nference‚Ä¶ a standard term in The Sciences)</em></p>
</div>
</section>
<section id="complications-selection-1" class="level2">
<h2 class="anchored" data-anchor-id="complications-selection-1">Complications: Selection</h2>
<ul>
<li>Tldr: Why did this person (unit) end up in the treatment group? Why did this other person (unit) end up in the control group?</li>
<li>Are there systematic differences?</li>
<li>‚Äú‚Äú‚ÄúVietnam‚Äù‚Äú‚Äù ‚Äú‚Äú‚ÄúWar‚Äù‚Äú‚Äù Draft: Why can‚Äôt we just study [men who join the military] versus [men who don‚Äôt], and take the difference as a causal estimate?</li>
</ul>
</section>
<section id="the-solution-matching" class="level2 crunch-title crunch-ul crunch-p crunch-li-8">
<h2 class="crunch-title crunch-ul crunch-p crunch-li-8 anchored" data-anchor-id="the-solution-matching">The Solution: <em>Matching</em></h2>
<div class="text-70">
<p><em>(W02 we looked at <strong>propensity score</strong> matching‚Ä¶ kind of the Na√Øve Bayes of matching)</em></p>
</div>
<ul>
<li><strong>Controlled experiment</strong>: we can <strong>ensure</strong> (since we have control over the <strong>assignment mechanism</strong>) the <strong>only systematic difference</strong> between <span class="math inline">\(C\)</span> and <span class="math inline">\(T\)</span> is: <span class="math inline">\(T\)</span> received treatment, <span class="math inline">\(C\)</span> did not</li>
<li>In an <strong>observational study</strong>, we‚Äôre ‚Äútoo late‚Äù! Thus, we no longer refer to <strong>assignment</strong> but to <strong>selection</strong></li>
<li>Our job is to <strong>reverse engineer</strong> the <strong>selection mechanism</strong>, then <strong>correct for its non-randomness</strong>. Spoiler: ‚Äútransform‚Äù observational <span class="math inline">\(\rightarrow\)</span> experimental via <strong>weighting</strong>.</li>
<li>That‚Äôs the gold at end of rainbow. The <strong>rainbow itself</strong> is‚Ä¶</li>
</ul>
</section>
</section>
<section id="do-calculus" class="level1" data-stack-name="Do-Calculus">
<h1 data-stack-name="Do-Calculus">Do-Calculus</h1>
<section id="our-data-generating-process" class="level2 crunch-title crunch-ul">
<h2 class="crunch-title crunch-ul anchored" data-anchor-id="our-data-generating-process">Our Data-Generating Process</h2>
<ul>
<li><span class="math inline">\(Y\)</span>: Future success, <span class="math inline">\(\mathcal{R}_Y = \{0, 1\}\)</span></li>
<li><span class="math inline">\(E\)</span>: Private school education, <span class="math inline">\(\mathcal{R}_E = \{0, 1\}\)</span></li>
<li><span class="math inline">\(V\)</span>: Born into poverty, <span class="math inline">\(\mathcal{R}_V = \{0, 1\}\)</span></li>
</ul>
<div class="callout callout-style-default callout-note callout-titled" title="The Private School $\leadsto$ Success Pipeline ü§ë">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
<span class="screen-reader-only">Note</span>The Private School <span class="math inline">\(\leadsto\)</span> Success Pipeline ü§ë
</div>
</div>
<div class="callout-body-container callout-body">
<ol type="1">
<li>Sample independent RVs <span class="math inline">\(U_1 \sim \mathcal{B}(1/2)\)</span>, <span class="math inline">\(U_2 \sim \mathcal{B}(1/3)\)</span>, <span class="math inline">\(U_3 \sim \mathcal{B}(1/3)\)</span></li>
<li><span class="math inline">\(V \leftarrow U_1\)</span></li>
<li><span class="math inline">\(E \leftarrow \textsf{if }(V = 1)\textsf{ then } 0\textsf{ else }U_2\)</span></li>
<li><span class="math inline">\(Y \leftarrow \textsf{if }(V = 1)\textsf{ then }0\textsf{ else }U_3\)</span></li>
</ol>
</div>
</div>
</section>
<section id="chalkboard-time" class="level2">
<h2 class="anchored" data-anchor-id="chalkboard-time">Chalkboard Time‚Ä¶</h2>
<ul>
<li><span class="math inline">\(\Pr(Y = 1) = \; ?\)</span></li>
<li><span class="math inline">\(\Pr(Y = 1 \mid E = 1) = \; ?\)</span></li>
</ul>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="images/pgm_schools.svg" class="img-fluid quarto-figure quarto-figure-center figure-img" width="500"></p>
</figure>
</div>
</section>
<section id="top-secret-answers-slide-dont-peek" class="level2 title-09">
<h2 class="title-09 anchored" data-anchor-id="top-secret-answers-slide-dont-peek">Top Secret Answers Slide (Don‚Äôt Peek)</h2>
<ul>
<li><span class="math inline">\(\Pr(Y = 1) = \frac{1}{6}\)</span></li>
<li><span class="math inline">\(\Pr(Y = 1 \mid E = 1) = \frac{1}{3}\)</span></li>
<li><span class="math inline">\(\overset{‚úÖ}{\implies}\)</span> One out of every three private-school graduates is successful, vs.&nbsp;one out of every six graduates overall</li>
<li><span class="math inline">\(\overset{‚ùì}{\implies}\)</span> Private school <strong>doubles</strong> likelihood of success!</li>
<li>Latter is only true if <em>intervening</em>/<em>changing</em>/<strong>do</strong><em>ing</em> <span class="math inline">\(E = 0 \leadsto E = 1\)</span> is what moves <span class="math inline">\(\Pr(Y = 1)\)</span> from <span class="math inline">\(\frac{1}{6}\)</span> to <span class="math inline">\(\frac{1}{3}\)</span>!</li>
</ul>
</section>
<section id="chalkboard-time-2-electric-boogaloo" class="level2 crunch-title crunch-ul crunch-callout title-09">
<h2 class="crunch-title crunch-ul crunch-callout title-09 anchored" data-anchor-id="chalkboard-time-2-electric-boogaloo">Chalkboard Time 2: Electric Boogaloo</h2>
<ul>
<li><span class="math-90"><span class="math inline">\(\Pr(Y = 1) = \frac{1}{6}\)</span></span></li>
<li><span class="math-90"><span class="math inline">\(\Pr(Y = 1 \mid E = 1) = \frac{1}{3}\)</span></span></li>
<li><span class="math-90"><span class="math inline">\(\Pr(Y = 1 \mid \textsf{do}(E = 1)) = \; ?\)</span></span></li>
<li>Here, <span class="math-90"><span class="math inline">\(\textsf{do}(E = 1)\)</span></span> means <strong>diving into the DGP below the surface</strong> and <strong>changing it</strong> so <span class="math-90"><span class="math inline">\(E = 1\)</span></span>‚Ä¶ <strong>Setting</strong> <span class="math-90"><span class="math inline">\(E\)</span></span> to be <span class="math-90"><span class="math inline">\(1\)</span></span></li>
</ul>
<div class="callout callout-style-default callout-note callout-titled" title="$\text{DGP}(Y \mid \textsf{do}(E = 1))$">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
<span class="screen-reader-only">Note</span><span class="math inline">\(\text{DGP}(Y \mid \textsf{do}(E = 1))\)</span>
</div>
</div>
<div class="callout-body-container callout-body">
<ol type="1">
<li>Sample independent RVs <span class="math inline">\(U_1 \sim \mathcal{B}(1/2)\)</span>, <span class="math inline">\(U_2 \sim \mathcal{B}(1/3)\)</span>, <span class="math inline">\(U_3 \sim \mathcal{B}(1/3)\)</span></li>
<li><span class="math inline">\(V \leftarrow U_1\)</span></li>
<li><span class="math inline">\(E \leftarrow \textsf{if }(V = 1)\textsf{ then } 0\textsf{ else }U_2\)</span></li>
<li><span class="math inline">\(Y \leftarrow \textsf{if }(V = 1)\textsf{ then }0\textsf{ else }U_3\)</span></li>
</ol>
</div>
</div>
</section>
<section id="double-quadruple-secret-answer-slide" class="level2">
<h2 class="anchored" data-anchor-id="double-quadruple-secret-answer-slide">Double Quadruple Secret Answer Slide</h2>
<ul>
<li><span class="math inline">\(\Pr(Y = 1) = \frac{1}{6}\)</span></li>
<li><span class="math inline">\(\Pr(Y = 1 \mid E = 1) = \frac{1}{3}\)</span></li>
<li><span class="math inline">\(\Pr(Y = 1 \mid \textsf{do}(E = 1)) = \frac{1}{6}\)</span></li>
<li>The takeaway:
<ul>
<li><span class="math inline">\(\Pr(Y = 1 \mid E = 1) &lt; \Pr(Y = 1)\)</span>, but</li>
<li><span class="math inline">\(\Pr(Y = 1 \mid \textsf{do}(E = 1)) = \Pr(Y = 1)\)</span></li>
</ul></li>
</ul>
</section>
<section id="the-problem-of-colliders" class="level2 crunch-title crunch-p">
<h2 class="crunch-title crunch-p anchored" data-anchor-id="the-problem-of-colliders">The Problem of Colliders</h2>
<p><a href="https://en.wikipedia.org/wiki/Berkson%27s_paradox">Berkson‚Äôs Paradox</a>:</p>
<ul>
<li><span class="math inline">\(X\)</span> and <span class="math inline">\(Y\)</span> are diseases which occur <strong>independently</strong>, no interrelationship, with probability <span class="math inline">\(1/3\)</span></li>
<li><strong>Either</strong> <span class="math inline">\(X\)</span> <strong>or</strong> <span class="math inline">\(Y\)</span> sufficient for admission to hospital, <span class="math inline">\(Z\)</span></li>
<li>We have: <span class="math inline">\(X \rightarrow Z \leftarrow Y\)</span> [üö® Collider alert!]</li>
</ul>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="images/pgm_berkson.svg" class="img-fluid quarto-figure quarto-figure-center figure-img"></p>
</figure>
</div>
</section>
<section id="whats-the-issue" class="level2">
<h2 class="anchored" data-anchor-id="whats-the-issue">What‚Äôs the Issue?</h2>
<ul>
<li><p>If we only have data on patients (<span class="math inline">\(Z = 1\)</span>), observing <span class="math inline">\(X = 1\)</span> lowers <span class="math inline">\(\Pr(Y = 1)\)</span>, despite the fact that <span class="math inline">\(X \perp Y\)</span>!</p></li>
<li><p><span class="math inline">\(X \perp Y\)</span>, but <span class="math inline">\((X \not\perp Y) \mid Z\)</span></p></li>
<li><p>The moral: controlling for stuff does <strong>not</strong> necessarily solve problem of causal inference, and can actually make it <strong>worse</strong> (inducing correlations where they don‚Äôt actually exist) üò≠</p></li>
</ul>
<div class="columns">
<div class="column" style="width:50%;">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="images/pgm_berkson_unobs.svg" class="img-fluid quarto-figure quarto-figure-center figure-img" width="260"></p>
</figure>
</div>
</div><div class="column" style="width:50%;">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="images/pgm_berkson_obs.svg" class="img-fluid quarto-figure quarto-figure-center figure-img" width="260"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="the-causal-trinity-when-controlling-for-stuff-helps" class="level2">
<h2 class="anchored" data-anchor-id="the-causal-trinity-when-controlling-for-stuff-helps">The Causal Trinity: When Controlling for Stuff Helps</h2>
<ul>
<li>Fork: Controlling helps!</li>
<li>Confounder: Controlling helps!</li>
<li>Collider: Controlling makes things worse üòû</li>
</ul>
</section>
<section id="the-final-diagrammatic-boss-swigs" class="level2 title-09 crunch-title">
<h2 class="title-09 crunch-title anchored" data-anchor-id="the-final-diagrammatic-boss-swigs">The Final Diagrammatic Boss: SWIGs</h2>
<ul>
<li><strong>S</strong>ingle <strong>W</strong>orld <strong>I</strong>ntervention <strong>G</strong>raphs</li>
</ul>
<div class="columns">
<div class="column" style="width:50%;">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="images/swigs_a0.svg" class="img-fluid quarto-figure quarto-figure-center figure-img" width="400"></p>
</figure>
</div>
</div><div class="column" style="width:50%;">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="images/swigs_a1.svg" class="img-fluid quarto-figure quarto-figure-center figure-img" width="400"></p>
</figure>
</div>
</div>
</div>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="images/swigs_combined.svg" class="img-fluid quarto-figure quarto-figure-center figure-img" width="600"></p>
</figure>
</div>
</section>
<section id="references" class="level2">
<h2 class="anchored" data-anchor-id="references">References</h2>
<div id="refs" class="references csl-bib-body hanging-indent" data-entry-spacing="0" role="list">
<div id="ref-dwork_fairness_2011" class="csl-entry" role="listitem">
Dwork, Cynthia, Moritz Hardt, Toniann Pitassi, Omer Reingold, and Rich Zemel. 2011. <span>‚ÄúFairness <span>Through Awareness</span>.‚Äù</span> November 28, 2011. <a href="https://doi.org/10.48550/arXiv.1104.3913">https://doi.org/10.48550/arXiv.1104.3913</a>.
</div>
<div id="ref-finetti_probability_1972" class="csl-entry" role="listitem">
Finetti, Bruno de. 1972. <em>Probability, <span>Induction</span> and <span>Statistics</span>: <span>The Art</span> of <span>Guessing</span></em>. J. Wiley. <a href="https://books.google.com?id=hENg7qRPOPYC">https://books.google.com?id=hENg7qRPOPYC</a>.
</div>
<div id="ref-firth_selected_1968" class="csl-entry" role="listitem">
Firth, John Rupert. 1968. <em>Selected <span>Papers</span> of <span>J</span>.<span>R</span>. <span>Firth</span>, 1952-59</em>. Longmans. <a href="https://books.google.com?id=Uxu3AAAAIAAJ">https://books.google.com?id=Uxu3AAAAIAAJ</a>.
</div>
<div id="ref-hume_treatise_1739" class="csl-entry" role="listitem">
Hume, David. 1739. <em>A <span>Treatise</span> of <span>Human Nature</span>: <span>Being</span> an <span>Attempt</span> to <span>Introduce</span> the <span>Experimental Method</span> of <span>Reasoning Into Moral Subjects</span>; and <span>Dialogues Concerning Natural Religion</span></em>. Longmans, Green.
</div>
<div id="ref-kiat_machines_2018" class="csl-entry" role="listitem">
Kiat, Lim Swee. 2018. <span>‚ÄúMachines <span>Gone Wrong</span>.‚Äù</span> <span>Singapore University of Technology and Design</span>. <a href="https://machinesgonewrong.com/about/">https://machinesgonewrong.com/about/</a>.
</div>
<div id="ref-riederer_price_2017" class="csl-entry" role="listitem">
Riederer, Christopher, and Augustin Chaintreau. 2017. <span>‚ÄúThe <span>Price</span> of <span>Fairness</span> in <span>Location Based Advertising</span>.‚Äù</span> <em>Fairness, Accountability, and Transparency Workshop on Responsible Recommendation</em>. <a href="https://doi.org/10.18122/B2MD8C">https://doi.org/10.18122/B2MD8C</a>.
</div>
<div id="ref-roemer_equality_1998" class="csl-entry" role="listitem">
Roemer, John E. 1998. <em>Equality of <span>Opportunity</span></em>. Harvard University Press. <a href="https://books.google.com?id=2LfA_KjvOAsC">https://books.google.com?id=2LfA_KjvOAsC</a>.
</div>
<div id="ref-rousey_friends_2001" class="csl-entry" role="listitem">
Rousey, Dennis C. 2001. <span>‚ÄúFriends and <span>Foes</span> of <span>Slavery</span>: <span>Foreigners</span> and <span>Northerners</span> in the <span>Old South</span>.‚Äù</span> <em>Journal of Social History</em> 35 (2): 373‚Äì96. <a href="https://www.jstor.org/stable/3790193">https://www.jstor.org/stable/3790193</a>.
</div>
<div id="ref-shahid_comparison_2009" class="csl-entry" role="listitem">
Shahid, Rizwan, Stefania Bertazzon, Merril L. Knudtson, and William A. Ghali. 2009. <span>‚ÄúComparison of Distance Measures in Spatial Analytical Modeling for Health Service Planning.‚Äù</span> <em>BMC Health Services Research</em> 9 (1): 200. <a href="https://doi.org/10.1186/1472-6963-9-200">https://doi.org/10.1186/1472-6963-9-200</a>.
</div>
<div id="ref-simons_algorithms_2023" class="csl-entry" role="listitem">
Simons, Josh. 2023. <em>Algorithms for the <span>People</span>: <span>Democracy</span> in the <span>Age</span> of <span>AI</span></em>. Princeton University Press. <a href="https://books.google.com?id=hIKIEAAAQBAJ">https://books.google.com?id=hIKIEAAAQBAJ</a>.
</div>
</div>


</section>
</section>
</div>
</section>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
  window.document.addEventListener("DOMContentLoaded", function (event) {
    // Ensure there is a toggle, if there isn't float one in the top right
    if (window.document.querySelector('.quarto-color-scheme-toggle') === null) {
      const a = window.document.createElement('a');
      a.classList.add('top-right');
      a.classList.add('quarto-color-scheme-toggle');
      a.href = "";
      a.onclick = function() { try { window.quartoToggleColorScheme(); } catch {} return false; };
      const i = window.document.createElement("i");
      i.classList.add('bi');
      a.appendChild(i);
      window.document.body.appendChild(a);
    }
    setColorSchemeToggle(hasAlternateSentinel())
    const icon = "Óßã";
    const anchorJS = new window.AnchorJS();
    anchorJS.options = {
      placement: 'right',
      icon: icon
    };
    anchorJS.add('.anchored');
    const isCodeAnnotation = (el) => {
      for (const clz of el.classList) {
        if (clz.startsWith('code-annotation-')) {                     
          return true;
        }
      }
      return false;
    }
    const onCopySuccess = function(e) {
      // button target
      const button = e.trigger;
      // don't keep focus
      button.blur();
      // flash "checked"
      button.classList.add('code-copy-button-checked');
      var currentTitle = button.getAttribute("title");
      button.setAttribute("title", "Copied!");
      let tooltip;
      if (window.bootstrap) {
        button.setAttribute("data-bs-toggle", "tooltip");
        button.setAttribute("data-bs-placement", "left");
        button.setAttribute("data-bs-title", "Copied!");
        tooltip = new bootstrap.Tooltip(button, 
          { trigger: "manual", 
            customClass: "code-copy-button-tooltip",
            offset: [0, -8]});
        tooltip.show();    
      }
      setTimeout(function() {
        if (tooltip) {
          tooltip.hide();
          button.removeAttribute("data-bs-title");
          button.removeAttribute("data-bs-toggle");
          button.removeAttribute("data-bs-placement");
        }
        button.setAttribute("title", currentTitle);
        button.classList.remove('code-copy-button-checked');
      }, 1000);
      // clear code selection
      e.clearSelection();
    }
    const getTextToCopy = function(trigger) {
      const outerScaffold = trigger.parentElement.cloneNode(true);
      const codeEl = outerScaffold.querySelector('code');
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
    const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
      text: getTextToCopy
    });
    clipboard.on('success', onCopySuccess);
    if (window.document.getElementById('quarto-embedded-source-code-modal')) {
      const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
        text: getTextToCopy,
        container: window.document.getElementById('quarto-embedded-source-code-modal')
      });
      clipboardModal.on('success', onCopySuccess);
    }
      var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
      var mailtoRegex = new RegExp(/^mailto:/);
        var filterRegex = new RegExp('/' + window.location.host + '/');
      var isInternal = (href) => {
          return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
      }
      // Inspect non-navigation links and adorn them if external
     var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
      for (var i=0; i<links.length; i++) {
        const link = links[i];
        if (!isInternal(link.href)) {
          // undo the damage that might have been done by quarto-nav.js in the case of
          // links that we want to consider external
          if (link.dataset.originalHref !== undefined) {
            link.href = link.dataset.originalHref;
          }
            // target, if specified
            link.setAttribute("target", "_blank");
            if (link.getAttribute("rel") === null) {
              link.setAttribute("rel", "noopener");
            }
            // default icon
            link.classList.add("external");
        }
      }
    function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
      const config = {
        allowHTML: true,
        maxWidth: 500,
        delay: 100,
        arrow: false,
        appendTo: function(el) {
            return el.parentElement;
        },
        interactive: true,
        interactiveBorder: 10,
        theme: 'quarto',
        placement: 'bottom-start',
      };
      if (contentFn) {
        config.content = contentFn;
      }
      if (onTriggerFn) {
        config.onTrigger = onTriggerFn;
      }
      if (onUntriggerFn) {
        config.onUntrigger = onUntriggerFn;
      }
      window.tippy(el, config); 
    }
    const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
    for (var i=0; i<noterefs.length; i++) {
      const ref = noterefs[i];
      tippyHover(ref, function() {
        // use id or data attribute instead here
        let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
        try { href = new URL(href).hash; } catch {}
        const id = href.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note) {
          return note.innerHTML;
        } else {
          return "";
        }
      });
    }
    const xrefs = window.document.querySelectorAll('a.quarto-xref');
    const processXRef = (id, note) => {
      // Strip column container classes
      const stripColumnClz = (el) => {
        el.classList.remove("page-full", "page-columns");
        if (el.children) {
          for (const child of el.children) {
            stripColumnClz(child);
          }
        }
      }
      stripColumnClz(note)
      if (id === null || id.startsWith('sec-')) {
        // Special case sections, only their first couple elements
        const container = document.createElement("div");
        if (note.children && note.children.length > 2) {
          container.appendChild(note.children[0].cloneNode(true));
          for (let i = 1; i < note.children.length; i++) {
            const child = note.children[i];
            if (child.tagName === "P" && child.innerText === "") {
              continue;
            } else {
              container.appendChild(child.cloneNode(true));
              break;
            }
          }
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(container);
          }
          return container.innerHTML
        } else {
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(note);
          }
          return note.innerHTML;
        }
      } else {
        // Remove any anchor links if they are present
        const anchorLink = note.querySelector('a.anchorjs-link');
        if (anchorLink) {
          anchorLink.remove();
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        if (note.classList.contains("callout")) {
          return note.outerHTML;
        } else {
          return note.innerHTML;
        }
      }
    }
    for (var i=0; i<xrefs.length; i++) {
      const xref = xrefs[i];
      tippyHover(xref, undefined, function(instance) {
        instance.disable();
        let url = xref.getAttribute('href');
        let hash = undefined; 
        if (url.startsWith('#')) {
          hash = url;
        } else {
          try { hash = new URL(url).hash; } catch {}
        }
        if (hash) {
          const id = hash.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          if (note !== null) {
            try {
              const html = processXRef(id, note.cloneNode(true));
              instance.setContent(html);
            } finally {
              instance.enable();
              instance.show();
            }
          } else {
            // See if we can fetch this
            fetch(url.split('#')[0])
            .then(res => res.text())
            .then(html => {
              const parser = new DOMParser();
              const htmlDoc = parser.parseFromString(html, "text/html");
              const note = htmlDoc.getElementById(id);
              if (note !== null) {
                const html = processXRef(id, note);
                instance.setContent(html);
              } 
            }).finally(() => {
              instance.enable();
              instance.show();
            });
          }
        } else {
          // See if we can fetch a full url (with no hash to target)
          // This is a special case and we should probably do some content thinning / targeting
          fetch(url)
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.querySelector('main.content');
            if (note !== null) {
              // This should only happen for chapter cross references
              // (since there is no id in the URL)
              // remove the first header
              if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
                note.children[0].remove();
              }
              const html = processXRef(null, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      }, function(instance) {
      });
    }
        let selectedAnnoteEl;
        const selectorForAnnotation = ( cell, annotation) => {
          let cellAttr = 'data-code-cell="' + cell + '"';
          let lineAttr = 'data-code-annotation="' +  annotation + '"';
          const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
          return selector;
        }
        const selectCodeLines = (annoteEl) => {
          const doc = window.document;
          const targetCell = annoteEl.getAttribute("data-target-cell");
          const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
          const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
          const lines = annoteSpan.getAttribute("data-code-lines").split(",");
          const lineIds = lines.map((line) => {
            return targetCell + "-" + line;
          })
          let top = null;
          let height = null;
          let parent = null;
          if (lineIds.length > 0) {
              //compute the position of the single el (top and bottom and make a div)
              const el = window.document.getElementById(lineIds[0]);
              top = el.offsetTop;
              height = el.offsetHeight;
              parent = el.parentElement.parentElement;
            if (lineIds.length > 1) {
              const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
              const bottom = lastEl.offsetTop + lastEl.offsetHeight;
              height = bottom - top;
            }
            if (top !== null && height !== null && parent !== null) {
              // cook up a div (if necessary) and position it 
              let div = window.document.getElementById("code-annotation-line-highlight");
              if (div === null) {
                div = window.document.createElement("div");
                div.setAttribute("id", "code-annotation-line-highlight");
                div.style.position = 'absolute';
                parent.appendChild(div);
              }
              div.style.top = top - 2 + "px";
              div.style.height = height + 4 + "px";
              div.style.left = 0;
              let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
              if (gutterDiv === null) {
                gutterDiv = window.document.createElement("div");
                gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
                gutterDiv.style.position = 'absolute';
                const codeCell = window.document.getElementById(targetCell);
                const gutter = codeCell.querySelector('.code-annotation-gutter');
                gutter.appendChild(gutterDiv);
              }
              gutterDiv.style.top = top - 2 + "px";
              gutterDiv.style.height = height + 4 + "px";
            }
            selectedAnnoteEl = annoteEl;
          }
        };
        const unselectCodeLines = () => {
          const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
          elementsIds.forEach((elId) => {
            const div = window.document.getElementById(elId);
            if (div) {
              div.remove();
            }
          });
          selectedAnnoteEl = undefined;
        };
          // Handle positioning of the toggle
      window.addEventListener(
        "resize",
        throttle(() => {
          elRect = undefined;
          if (selectedAnnoteEl) {
            selectCodeLines(selectedAnnoteEl);
          }
        }, 10)
      );
      function throttle(fn, ms) {
      let throttle = false;
      let timer;
        return (...args) => {
          if(!throttle) { // first call gets through
              fn.apply(this, args);
              throttle = true;
          } else { // all the others get throttled
              if(timer) clearTimeout(timer); // cancel #2
              timer = setTimeout(() => {
                fn.apply(this, args);
                timer = throttle = false;
              }, ms);
          }
        };
      }
        // Attach click handler to the DT
        const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
        for (const annoteDlNode of annoteDls) {
          annoteDlNode.addEventListener('click', (event) => {
            const clickedEl = event.target;
            if (clickedEl !== selectedAnnoteEl) {
              unselectCodeLines();
              const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
              if (activeEl) {
                activeEl.classList.remove('code-annotation-active');
              }
              selectCodeLines(clickedEl);
              clickedEl.classList.add('code-annotation-active');
            } else {
              // Unselect the line
              unselectCodeLines();
              clickedEl.classList.remove('code-annotation-active');
            }
          });
        }
    const findCites = (el) => {
      const parentEl = el.parentElement;
      if (parentEl) {
        const cites = parentEl.dataset.cites;
        if (cites) {
          return {
            el,
            cites: cites.split(' ')
          };
        } else {
          return findCites(el.parentElement)
        }
      } else {
        return undefined;
      }
    };
    var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
    for (var i=0; i<bibliorefs.length; i++) {
      const ref = bibliorefs[i];
      const citeInfo = findCites(ref);
      if (citeInfo) {
        tippyHover(citeInfo.el, function() {
          var popup = window.document.createElement('div');
          citeInfo.cites.forEach(function(cite) {
            var citeDiv = window.document.createElement('div');
            citeDiv.classList.add('hanging-indent');
            citeDiv.classList.add('csl-entry');
            var biblioDiv = window.document.getElementById('ref-' + cite);
            if (biblioDiv) {
              citeDiv.innerHTML = biblioDiv.innerHTML;
            }
            popup.appendChild(citeDiv);
          });
          return popup.innerHTML;
        });
      }
    }
  });
  </script>
</div> <!-- /content -->




<footer class="footer"><div class="nav-footer"><div class="nav-footer-center"><div class="toc-actions d-sm-block d-md-none"><ul><li><a href="https://github.com/jpowerj/dsan5450/blob/main/w06/index.qmd" target="_blank" class="toc-action"><i class="bi bi-github"></i>View source</a></li></ul></div></div></div></footer></body></html>